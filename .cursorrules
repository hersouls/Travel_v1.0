# Moonwave Travel v3.0 - Cursor AI ê°œë°œ ê·œì¹™

> "ê°€ì§œ íë¦„ì´ ì•„ë‹Œ, ì‹¤ì œ íë¦„ìœ¼ë¡œ ì„¤ê³„í•œë‹¤" - ì—¬í–‰ í”Œë˜ë‹ ì‹œìŠ¤í…œ

## ğŸš« ì ˆëŒ€ ê¸ˆì§€ ì‚¬í•­ (NEVER)

### 1. localhost ê°œë°œ í™˜ê²½ ì™„ì „ ê¸ˆì§€
```typescript
// âŒ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ ê²ƒ
npm run dev
yarn dev
localhost:3000
"dev": "next dev"
```

### 2. Mock ë°ì´í„° ì‚¬ìš© ì™„ì „ ê¸ˆì§€
```typescript
// âŒ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ ê²ƒ
const mockTravelPlans = [...]
const dummyDestinations = [...]
const testData = [...]
if (isDev) useMockData()
hardcoded arrays for testing
```

### 3. ê°€ì§œ íë¦„ íŒ¨í„´ ê¸ˆì§€
```typescript
// âŒ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ ê²ƒ
const data = process.env.NODE_ENV === 'development' ? mockData : realData
if (typeof window === 'undefined') return dummyData
localStorage fallback patterns
```

## âœ… í•„ìˆ˜ ì‹¤í–‰ ì‚¬í•­ (ALWAYS)

### 1. GitHub Repository ì§ì ‘ ì—°ë™
- Cursor AIëŠ” GitHub Repositoryì— ì§ì ‘ ì ‘ì†í•˜ì—¬ ì½”ë“œ ì‘ì„±
- ëª¨ë“  ë³€ê²½ì‚¬í•­ì€ ì¦‰ì‹œ GitHubì— commit/push
- GitHub Actionsë¥¼ í†µí•´ travel.moonwave.kr ìë™ ë°°í¬

### 2. Supabase ì‹¤ì‹œê°„ DB ì—°ë™ í•„ìˆ˜
```typescript
// âœ… ë°˜ë“œì‹œ ì‚¬ìš©í•´ì•¼ í•  íŒ¨í„´
import { useSupabase } from '@/contexts/SupabaseContext';

const { data, error } = await supabase
  .from('travel_plans')
  .select('*')
  .eq('user_id', user.id);
```

### 3. ì‹¤ì œ ë°ì´í„° íë¦„ë§Œ ì‚¬ìš©
- í”„ë¡œì íŠ¸ ì‹œì‘ë¶€í„° Supabase DB ì—°ë™
- ëª¨ë“  UIëŠ” ì‹¤ì œ ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„
- í…ŒìŠ¤íŠ¸ë„ ì‹¤ì œ Supabase í…ŒìŠ¤íŠ¸ í™˜ê²½ ì‚¬ìš©

## ğŸ¨ ë””ìì¸ ì‹œìŠ¤í…œ (Pretendard + Container Queries)

### 1. Pretendard í°íŠ¸ í•„ìˆ˜ ì ìš©
```typescript
// âœ… ëª¨ë“  í…ìŠ¤íŠ¸ ì»´í¬ë„ŒíŠ¸ì— í•„ìˆ˜ ì ìš©
className={cn(
  'font-pretendard antialiased',
  'tracking-korean-normal break-keep-ko'
)}
```

### 2. í•œê¸€ ìµœì í™” í´ë˜ìŠ¤ í•„ìˆ˜
```css
/* í•„ìˆ˜ ì ìš© í´ë˜ìŠ¤ */
.tracking-korean-tight { letter-spacing: -0.02em; }
.tracking-korean-normal { letter-spacing: -0.01em; }
.break-keep-ko { word-break: keep-all; overflow-wrap: break-word; }
.text-numeric { font-variant-numeric: tabular-nums; }
```

### 3. Container Queries ë°˜ì‘í˜• ì‹œìŠ¤í…œ
```typescript
// âœ… ëª¨ë“  ë°˜ì‘í˜• ì»´í¬ë„ŒíŠ¸ì— í•„ìˆ˜ ì ìš©
<div className="@container">
  <div className="@lg:flex-row @lg:items-center @lg:justify-between flex flex-col">
    <h3 className="@lg:text-xl text-lg font-pretendard">
      {title}
    </h3>
  </div>
</div>
```

## ğŸ— í”„ë¡œì íŠ¸ êµ¬ì¡°

### 1. Next.js App Router êµ¬ì¡°
```
app/
â”œâ”€â”€ layout.tsx              # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ (Pretendard ì„¤ì •)
â”œâ”€â”€ page.tsx               # ë©”ì¸ í˜ì´ì§€ (ì—¬í–‰ ëª©ë¡)
â”œâ”€â”€ globals.css            # Tailwind + Pretendard CSS
â”œâ”€â”€ travels/               # ì—¬í–‰ ê´€ë ¨ í˜ì´ì§€
â”‚   â”œâ”€â”€ page.tsx          # ì—¬í–‰ ëª©ë¡
â”‚   â”œâ”€â”€ new/              # ì—¬í–‰ ìƒì„±
â”‚   â””â”€â”€ [travelId]/       # ì—¬í–‰ ìƒì„¸
â”‚       â”œâ”€â”€ page.tsx      # ì—¬í–‰ ìƒì„¸ ë³´ê¸°
â”‚       â”œâ”€â”€ edit/         # ì—¬í–‰ ìˆ˜ì •
â”‚       â””â”€â”€ plans/        # Dayë³„ ê³„íš
â””â”€â”€ map/                  # ì§€ë„ ë·°
    â””â”€â”€ page.tsx
```

### 2. ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```
components/
â”œâ”€â”€ ui/                   # ê¸°ë³¸ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ Button.tsx       # Pretendard + ì ‘ê·¼ì„± ì ìš©
â”‚   â”œâ”€â”€ Card.tsx         # Container Queries ì ìš©
â”‚   â”œâ”€â”€ Input.tsx        # í•œê¸€ ì…ë ¥ ìµœì í™”
â”‚   â””â”€â”€ Badge.tsx        # ì—¬í–‰ ìœ í˜• í‘œì‹œ
â”œâ”€â”€ features/            # ë„ë©”ì¸ íŠ¹í™” ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ travel/          # ì—¬í–‰ ê´€ë ¨
â”‚   â”‚   â”œâ”€â”€ TravelCard.tsx
â”‚   â”‚   â””â”€â”€ TravelList.tsx
â”‚   â”œâ”€â”€ plans/           # ê³„íš ê´€ë ¨
â”‚   â”‚   â”œâ”€â”€ DayPlanCard.tsx
â”‚   â”‚   â””â”€â”€ PlanEditor.tsx
â”‚   â””â”€â”€ maps/            # ì§€ë„ ê´€ë ¨
â”‚       â””â”€â”€ TravelMap.tsx
â””â”€â”€ providers/           # ì „ì—­ í”„ë¡œë°”ì´ë”
    â””â”€â”€ SupabaseProvider.tsx
```

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (Supabase)

### 1. í•µì‹¬ í…Œì´ë¸” êµ¬ì¡°
```sql
-- ì‚¬ìš©ì í”„ë¡œí•„
CREATE TABLE profiles (
  id UUID PRIMARY KEY REFERENCES auth.users(id),
  email TEXT UNIQUE NOT NULL,
  name TEXT,
  avatar_url TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);

-- ì—¬í–‰ ê³„íš
CREATE TABLE travel_plans (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES profiles(id),
  title TEXT NOT NULL,
  destination TEXT NOT NULL,
  start_date DATE NOT NULL,
  end_date DATE NOT NULL,
  description TEXT,
  cover_image_url TEXT,
  is_public BOOLEAN DEFAULT FALSE,
  status TEXT DEFAULT 'planning',
  collaborators TEXT[],
  created_at TIMESTAMP DEFAULT NOW()
);

-- Dayë³„ ì¼ì •
CREATE TABLE travel_days (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  travel_plan_id UUID REFERENCES travel_plans(id),
  day_number INTEGER NOT NULL,
  date DATE NOT NULL,
  title TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);

-- ì„¸ë¶€ ê³„íš
CREATE TABLE day_plans (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  travel_day_id UUID REFERENCES travel_days(id),
  place_name TEXT NOT NULL,
  place_address TEXT,
  google_place_id TEXT,
  latitude DECIMAL(10,8),
  longitude DECIMAL(11,8),
  planned_time TIME,
  duration_minutes INTEGER,
  plan_type TEXT DEFAULT 'sightseeing',
  notes TEXT,
  image_urls TEXT[],
  youtube_url TEXT,
  budget DECIMAL(10,2),
  order_index INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW()
);
```

### 2. RLS ì •ì±… í•„ìˆ˜ ì„¤ì •
```sql
-- ì‚¬ìš©ìë³„ ë°ì´í„° ê²©ë¦¬
ALTER TABLE travel_plans ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Users can manage own travel plans" 
ON travel_plans FOR ALL USING (auth.uid() = user_id);
```

## ğŸ”Œ API ì—°ë™ íŒ¨í„´

### 1. Supabase ì—°ë™ í‘œì¤€ íŒ¨í„´
```typescript
// âœ… hooks/useTravelPlans.ts
export const useTravelPlans = () => {
  const { user, supabase } = useSupabase();
  const [travelPlans, setTravelPlans] = useState<TravelPlan[]>([]);
  const [loading, setLoading] = useState(true);

  const fetchTravelPlans = useCallback(async () => {
    if (!user) return;
    
    const { data, error } = await supabase
      .from('travel_plans')
      .select(`
        *,
        travel_days (
          *,
          day_plans (*)
        )
      `)
      .eq('user_id', user.id)
      .order('created_at', { ascending: false });

    if (error) {
      console.error('ì—¬í–‰ ë°ì´í„° ë¡œë”© ì‹¤íŒ¨:', error);
      return;
    }
    
    setTravelPlans(data || []);
  }, [user, supabase]);

  // ì‹¤ì‹œê°„ êµ¬ë…
  useEffect(() => {
    if (!user) return;
    
    fetchTravelPlans();
    
    const subscription = supabase
      .channel('travel_plans_realtime')
      .on('postgres_changes', {
        event: '*',
        schema: 'public',
        table: 'travel_plans',
        filter: `user_id=eq.${user.id}`
      }, () => fetchTravelPlans())
      .subscribe();

    return () => subscription.unsubscribe();
  }, [fetchTravelPlans, user, supabase]);

  return { travelPlans, loading };
};
```

### 2. Google Maps API ì—°ë™
```typescript
// âœ… hooks/useGoogleMaps.ts
export const useGoogleMaps = () => {
  const [isLoaded, setIsLoaded] = useState(false);
  
  useEffect(() => {
    const loader = new Loader({
      apiKey: process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY!,
      version: "weekly",
      libraries: ["places", "geometry"]
    });
    
    loader.load().then(() => setIsLoaded(true));
  }, []);
  
  return { isLoaded };
};
```

## ğŸ¯ ì»´í¬ë„ŒíŠ¸ ê°œë°œ í‘œì¤€

### 1. ì»´í¬ë„ŒíŠ¸ ìƒì„± í…œí”Œë¦¿
```typescript
// âœ… ëª¨ë“  ì»´í¬ë„ŒíŠ¸ëŠ” ì´ íŒ¨í„´ì„ ë”°ë¼ì•¼ í•¨
import React from 'react';
import { cn } from '@/lib/utils';
import { Database } from '@/types/supabase';

type TravelPlan = Database['public']['Tables']['travel_plans']['Row'];

export interface TravelCardProps {
  travel: TravelPlan;
  onEdit?: (travel: TravelPlan) => void;
  className?: string;
}

export const TravelCard = React.forwardRef<HTMLDivElement, TravelCardProps>(
  ({ travel, onEdit, className, ...props }, ref) => {
    return (
      <div
        ref={ref}
        className={cn(
          // ê¸°ë³¸ ìŠ¤íƒ€ì¼ - Pretendard ì ìš©
          'font-pretendard antialiased',
          
          // Container Queries ì„¤ì •
          '@container bg-white rounded-xl border border-gray-200',
          'shadow-sm hover:shadow-lg transition-all duration-200',
          
          className
        )}
        {...props}
      >
        <div className="@md:p-6 p-4">
          <h3 className={cn(
            'font-pretendard font-semibold text-lg @md:text-xl',
            'text-gray-900 tracking-korean-tight break-keep-ko mb-2'
          )}>
            {travel.title}
          </h3>
          
          <p className={cn(
            'font-pretendard text-sm text-gray-600',
            'tracking-korean-normal break-keep-ko'
          )}>
            {travel.destination}
          </p>
        </div>
      </div>
    );
  }
);

TravelCard.displayName = 'TravelCard';
```

### 2. í•„ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸
```typescript
const COMPONENT_CHECKLIST = [
  "âœ… font-pretendard antialiased í´ë˜ìŠ¤ ì ìš©",
  "âœ… tracking-korean-normal, break-keep-ko í´ë˜ìŠ¤ ì ìš©",
  "âœ… @container ê¸°ë°˜ ë°˜ì‘í˜• ì²˜ë¦¬",
  "âœ… Supabase Database íƒ€ì… ì‚¬ìš©",
  "âœ… React.forwardRef ì ìš© (í•„ìš”í•œ ê²½ìš°)",
  "âœ… displayName ì„¤ì •",
  "âœ… ARIA ì ‘ê·¼ì„± ì†ì„±",
  "âœ… ì‹¤ì œ ë°ì´í„°ë§Œ ì‚¬ìš©",
  "âŒ Mock ë°ì´í„° ì‚¬ìš© ê¸ˆì§€",
  "âŒ localhost ê´€ë ¨ ì½”ë“œ ê¸ˆì§€"
];
```

## ğŸ”§ í™˜ê²½ ì„¤ì •

### 1. Next.js ì„¤ì • (next.config.js)
```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  output: 'export',  // GitHub Pages ë°°í¬ìš©
  images: {
    unoptimized: true,
    remotePatterns: [
      {
        protocol: 'https',
        hostname: '**.supabase.co',
      }
    ],
  },
  env: {
    NEXT_PUBLIC_SITE_URL: 'https://travel.moonwave.kr',
  },
  experimental: {
    typedRoutes: true,
  }
};

module.exports = nextConfig;
```

### 2. Tailwind ì„¤ì • (tailwind.config.js)
```javascript
module.exports = {
  content: ['./app/**/*.{js,ts,jsx,tsx}', './components/**/*.{js,ts,jsx,tsx}'],
  theme: {
    extend: {
      fontFamily: {
        pretendard: [
          'Pretendard Variable', 
          'Pretendard', 
          '-apple-system', 
          'BlinkMacSystemFont', 
          'system-ui', 
          'sans-serif'
        ]
      },
      colors: {
        moonwave: {
          primary: '#2563EB',
          secondary: '#8B5CF6',
        }
      }
    }
  },
  plugins: [require('@tailwindcss/container-queries')]
};
```

### 3. í™˜ê²½ ë³€ìˆ˜ (í•„ìˆ˜)
```bash
# GitHub Secretsì— ì„¤ì •í•´ì•¼ í•  í™˜ê²½ ë³€ìˆ˜
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=your-google-maps-key
NEXT_PUBLIC_GOOGLE_PLACES_API_KEY=your-google-places-key
NEXT_PUBLIC_SITE_URL=https://travel.moonwave.kr
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

### 1. ì‹¤ì œ ë°ì´í„° ê¸°ë°˜ í…ŒìŠ¤íŠ¸
```typescript
// âœ… í…ŒìŠ¤íŠ¸ë„ ì‹¤ì œ Supabase í…ŒìŠ¤íŠ¸ í™˜ê²½ ì‚¬ìš©
import { setupTestDatabase, cleanupTestDatabase } from '@/test/setup/supabase-test';

describe('useTravelPlans', () => {
  let testUser: any;

  beforeEach(async () => {
    const setup = await setupTestDatabase();
    testUser = setup.user;
  });

  afterEach(async () => {
    await cleanupTestDatabase(testUser.id);
  });

  it('ì‹¤ì œ Supabase ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•¨', async () => {
    const { result } = renderHook(() => useTravelPlans());
    
    await waitFor(() => {
      expect(result.current.loading).toBe(false);
    });
    
    expect(result.current.travelPlans).toHaveLength(1);
  });
});
```

## ğŸš€ ë°°í¬ ë° ì„±ëŠ¥

### 1. GitHub Actions (ìë™ ë°°í¬)
```yaml
# .github/workflows/deploy.yml
name: Deploy to travel.moonwave.kr

on:
  push:
    branches: [main]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'
    
    - name: Install and Build
      run: |
        npm ci
        npm run build
      env:
        NEXT_PUBLIC_SUPABASE_URL: ${{ secrets.NEXT_PUBLIC_SUPABASE_URL }}
        NEXT_PUBLIC_SUPABASE_ANON_KEY: ${{ secrets.NEXT_PUBLIC_SUPABASE_ANON_KEY }}
    
    - name: Deploy
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./out
        cname: travel.moonwave.kr
```

### 2. ì„±ëŠ¥ ëª©í‘œ
```typescript
const PERFORMANCE_TARGETS = {
  LCP: '< 2.5ì´ˆ',          // Largest Contentful Paint
  FID: '< 100ms',          // First Input Delay  
  CLS: '< 0.1',            // Cumulative Layout Shift
  Bundle: '< 500KB',       // ë²ˆë“¤ í¬ê¸°
  'Pretendard Loading': '< 500ms'  // í°íŠ¸ ë¡œë”©
};
```

## ğŸ“ ì½”ë”© ì»¨ë²¤ì…˜

### 1. ë„¤ì´ë° ê·œì¹™
```typescript
// ì»´í¬ë„ŒíŠ¸: PascalCase
TravelCard.tsx
DayPlanCard.tsx

// í›…: camelCase with 'use' prefix
useTravelPlans.ts
useDayPlans.ts

// ìœ í‹¸ë¦¬í‹°: camelCase
formatDate.ts
formatCurrency.ts

// íƒ€ì…: Database íƒ€ì… ì‚¬ìš©
type TravelPlan = Database['public']['Tables']['travel_plans']['Row'];
```

### 2. íŒŒì¼ êµ¬ì¡°
```typescript
// ì»´í¬ë„ŒíŠ¸ íŒŒì¼ êµ¬ì¡°
export interface ComponentProps {
  // Props ì •ì˜
}

export const Component = React.forwardRef<HTMLElement, ComponentProps>(
  ({ ...props }, ref) => {
    // ì»´í¬ë„ŒíŠ¸ ë¡œì§
    return (
      <div ref={ref} className="font-pretendard antialiased">
        {/* JSX */}
      </div>
    );
  }
);

Component.displayName = 'Component';
```

## ğŸ† ìµœì¢… ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

```typescript
const FINAL_CHECKLIST = [
  // ê¸ˆì§€ ì‚¬í•­ í™•ì¸
  "âŒ localhost ì½”ë“œ ì—†ìŒ",
  "âŒ Mock ë°ì´í„° ì—†ìŒ", 
  "âŒ í•˜ë“œì½”ë”©ëœ ë°°ì—´ ì—†ìŒ",
  
  // í•„ìˆ˜ ì‚¬í•­ í™•ì¸
  "âœ… Supabase ì‹¤ì‹œê°„ ì—°ë™",
  "âœ… Pretendard í°íŠ¸ ì ìš©",
  "âœ… Container Queries ë°˜ì‘í˜•",
  "âœ… Google Maps API ì—°ë™",
  "âœ… TypeScript strict ëª¨ë“œ",
  "âœ… ì ‘ê·¼ì„± ARIA ì†ì„±",
  
  // ë°°í¬ í™•ì¸
  "âœ… GitHub Actions ë°°í¬ ì„±ê³µ",
  "âœ… travel.moonwave.kr ì ‘ì† í™•ì¸",
  "âœ… ì‹¤ì œ ë°ì´í„° ë¡œë”© í™•ì¸",
  "âœ… ì„±ëŠ¥ ëª©í‘œ ë‹¬ì„±"
];
```

---

**Moonwave Travel v3.0 Cursor Rules**  
*"ê°€ì§œ íë¦„ì´ ì•„ë‹Œ, ì‹¤ì œ íë¦„ìœ¼ë¡œ ì„¤ê³„í•œë‹¤"*  
*Next.js + Supabase + Google Maps + Pretendard + Container Queries*

ì´ ê·œì¹™ì„ ë”°ë¼ ì¼ê´€ë˜ê³  ê³ í’ˆì§ˆì˜ ì—¬í–‰ í”Œë˜ë‹ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ì„¸ìš”.