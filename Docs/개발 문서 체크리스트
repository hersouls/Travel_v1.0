# Moonwave Phase 1 ì´ì „ í•„ìˆ˜ ê°œë°œ ë¬¸ì„œ ì²´í¬ë¦¬ìŠ¤íŠ¸

> "ê°€ì§œ íë¦„ì´ ì•„ë‹Œ, ì‹¤ì œ íë¦„ìœ¼ë¡œ ì„¤ê³„í•œë‹¤" - ì™„ì „í•œ ë¬¸ì„œ ê¸°ë°˜ ê°œë°œ ì¤€ë¹„

## ğŸ“‹ ë¬¸ì„œ ì‘ì„± ìš°ì„ ìˆœìœ„ ë° ì²´í¬ë¦¬ìŠ¤íŠ¸

### ğŸ¯ **TIER 1: í•µì‹¬ ì „ëµ ë¬¸ì„œ (Phase 1 ì‹œì‘ ì „ í•„ìˆ˜)**

#### 1.1 PRD (Product Requirements Document)
```markdown
# Moonwave êµ¬ë… ê´€ë¦¬ ì‹œìŠ¤í…œ PRD v1.0

## ğŸ¯ ì œí’ˆ ë¹„ì „
**Vision Statement**: êµ¬ë… ì„œë¹„ìŠ¤ì˜ ë³µì¡í•¨ì„ ë‹¨ìˆœí•¨ìœ¼ë¡œ ë³€í™”ì‹œì¼œ, ì‚¬ìš©ìê°€ ì§„ì •ìœ¼ë¡œ ê°€ì¹˜ ìˆëŠ” ì„œë¹„ìŠ¤ì—ë§Œ íˆ¬ìí•  ìˆ˜ ìˆë„ë¡ ë•ëŠ”ë‹¤.

## ğŸ“Š ë¬¸ì œ ì •ì˜ (Problem Statement)
- **í˜„ì¬ ìƒí™©**: í‰ê·  í•œêµ­ì¸ì´ ê´€ë¦¬í•˜ëŠ” êµ¬ë… ì„œë¹„ìŠ¤ 7.2ê°œ, ì›” í‰ê·  ì§€ì¶œ 89,000ì›
- **í•µì‹¬ ë¬¸ì œ**: 
  1. êµ¬ë… ì„œë¹„ìŠ¤ í˜„í™© íŒŒì•… ì–´ë ¤ì›€ (67% ì‚¬ìš©ì)
  2. ë¶ˆí•„ìš”í•œ êµ¬ë… ì§€ì† ê²°ì œ (43% ì‚¬ìš©ì)
  3. ê²°ì œì¼ ê´€ë¦¬ ë¶€ì¬ë¡œ ì¸í•œ ì˜ˆìƒì¹˜ ëª»í•œ ì§€ì¶œ (78% ì‚¬ìš©ì)

## ğŸ¯ ëª©í‘œ ì‚¬ìš©ì (Target Users)
**Primary**: 25-40ì„¸ ì§ì¥ì¸, ì›” 5ê°œ ì´ìƒ êµ¬ë… ì„œë¹„ìŠ¤ ì´ìš©
**Secondary**: 20-25ì„¸ ëŒ€í•™ìƒ, ë””ì§€í„¸ ë„¤ì´í‹°ë¸Œ
**Persona**: "ì²´ê³„ì  ê´€ë¦¬ë¥¼ ì›í•˜ì§€ë§Œ ì‹œê°„ì´ ë¶€ì¡±í•œ ë°€ë ˆë‹ˆì–¼"

## ğŸš€ í•µì‹¬ ê¸°ëŠ¥ (Core Features)
### MVP (Minimum Viable Product)
1. **êµ¬ë… ì„œë¹„ìŠ¤ ë“±ë¡ ë° ê´€ë¦¬**
   - ì„œë¹„ìŠ¤ëª…, ê°€ê²©, ê²°ì œ ì£¼ê¸°, ë‹¤ìŒ ê²°ì œì¼
   - ì¹´í…Œê³ ë¦¬ë³„ ë¶„ë¥˜ (ìŠ¤íŠ¸ë¦¬ë°, ì†Œí”„íŠ¸ì›¨ì–´, ê²Œì„, ë‰´ìŠ¤ ë“±)

2. **ëŒ€ì‹œë³´ë“œ ë° í˜„í™© ë¶„ì„**
   - ì›”ê°„/ì—°ê°„ ì´ êµ¬ë…ë£Œ ê³„ì‚°
   - ì¹´í…Œê³ ë¦¬ë³„ ì§€ì¶œ ë¶„ì„
   - êµ¬ë… ìˆ˜ ë° í‰ê·  ë¹„ìš© í†µê³„

3. **ê²°ì œ ì•Œë¦¼ ì‹œìŠ¤í…œ**
   - ê²°ì œ ì˜ˆì •ì¼ 3ì¼ ì „ ì•Œë¦¼
   - ì›”ê°„ êµ¬ë…ë£Œ ìš”ì•½ ë¦¬í¬íŠ¸

### v1.1 í™•ì¥ ê¸°ëŠ¥
4. **êµ¬ë… ìµœì í™” ì œì•ˆ**
   - ìœ ì‚¬ ì„œë¹„ìŠ¤ ë¹„êµ ë¶„ì„
   - ë¹„ìš© ì ˆì•½ ì œì•ˆ
   - ì—°ê°„ ê²°ì œ í• ì¸ ì•Œë¦¼

5. **ê°€ì¡±/íŒ€ êµ¬ë… ê´€ë¦¬**
   - ê³µìœ  êµ¬ë… ê´€ë¦¬
   - ë¹„ìš© ë¶„ë‹´ ê³„ì‚°

## ğŸ“ ì„±ê³µ ì§€í‘œ (Success Metrics)
- **ì‚¬ìš©ì ì°¸ì—¬**: ì›” í™œì„± ì‚¬ìš©ì 1,000ëª… (3ê°œì›” ë‚´)
- **ê¸°ëŠ¥ ì‚¬ìš©**: êµ¬ë… ë“±ë¡ë¥  85%, ì•Œë¦¼ í™•ì¸ë¥  70%
- **ë¹„ì¦ˆë‹ˆìŠ¤**: ì‚¬ìš©ìë‹¹ í‰ê·  êµ¬ë…ë£Œ ì ˆì•½ ì›” 15,000ì›

## ğŸ›£ ë¡œë“œë§µ (Roadmap)
- **MVP**: 2025.08-09 (2ê°œì›”)
- **v1.1**: 2025.10-11 (2ê°œì›”)  
- **v1.2**: 2025.12-2026.01 (2ê°œì›”)

## ğŸš« ì œì•½ì‚¬í•­ (Constraints)
- **ê¸°ìˆ ì **: GitHub ì§ì ‘ ë°°í¬, Mock ë°ì´í„° ì‚¬ìš© ê¸ˆì§€
- **ì˜ˆì‚°ì **: ë¬´ë£Œ í‹°ì–´ ë²”ìœ„ ë‚´ ê°œë°œ (Supabase, GitHub)
- **ì‹œê°„ì **: MVP 2ê°œì›” ë‚´ ì™„ì„±

## ğŸ“‹ ìš”êµ¬ì‚¬í•­ ìš°ì„ ìˆœìœ„
**Must Have**: êµ¬ë… CRUD, ëŒ€ì‹œë³´ë“œ, ê²°ì œì¼ ì•Œë¦¼
**Should Have**: ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜, í†µê³„ ë¶„ì„
**Could Have**: ìµœì í™” ì œì•ˆ, ë¦¬í¬íŠ¸ ìƒì„±
**Won't Have**: ì‹¤ì œ ê²°ì œ ì—°ë™, ì™¸ë¶€ API ìë™ ë™ê¸°í™”
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸**: 
- [ ] ì œí’ˆ ë¹„ì „ ë° ëª©í‘œ ëª…í™•í™”
- [ ] íƒ€ê²Ÿ ì‚¬ìš©ì í˜ë¥´ì†Œë‚˜ ì •ì˜
- [ ] MVP ê¸°ëŠ¥ ë²”ìœ„ í™•ì •
- [ ] ì„±ê³µ ì§€í‘œ ì„¤ì •
- [ ] ê°œë°œ ì¼ì • ê³„íš

---

#### 1.2 ê¸°ìˆ  ì•„í‚¤í…ì²˜ ë¬¸ì„œ (Technical Architecture Document)
```markdown
# Moonwave ê¸°ìˆ  ì•„í‚¤í…ì²˜ v2.0 (React â†’ Next.js í™•ì¥ ì „ëµ)

## ğŸ— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ê°œìš”

### Frontend Architecture Evolution

#### Phase 1: React + Vite (MVP - ë¹ ë¥¸ ì¶œì‹œ)
- **Framework**: React 18 + TypeScript 5
- **Build Tool**: Vite (ë¹ ë¥¸ ê°œë°œ ì†ë„)
- **Styling**: Tailwind CSS + Container Queries
- **State Management**: React Context + Custom Hooks + Zustand
- **Routing**: React Router DOM
- **Font**: Pretendard (í•œê¸€ ìµœì í™”)
- **Target**: ë¹ ë¥¸ MVP ê°œë°œ ë° ì‹œì¥ ê²€ì¦

#### Phase 2: Next.js Migration (í™•ì¥ ë° ìµœì í™”)
- **Framework**: Next.js 14+ (App Router)
- **Rendering**: SSR + SSG + ISR (SEO ìµœì í™”)
- **API Routes**: Next.js API Routes (í’€ìŠ¤íƒ í™•ì¥)
- **Deployment**: Vercel (ìµœì í™”ëœ ë°°í¬)
- **Image Optimization**: Next.js Image ì»´í¬ë„ŒíŠ¸
- **Target**: SEO, ì„±ëŠ¥ ìµœì í™”, í’€ìŠ¤íƒ í™•ì¥

### Migration Strategy (ì ì§„ì  ì „í™˜)

#### 1ë‹¨ê³„: React ê¸°ë°˜ MVP (2-3ê°œì›”)
```typescript
// í˜„ì¬ React ì•„í‚¤í…ì²˜
src/
â”œâ”€â”€ components/          # Next.js í˜¸í™˜ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„
â”‚   â”œâ”€â”€ ui/             # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ features/       # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ layout/         # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ hooks/              # Next.jsì—ì„œ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í›…
â”œâ”€â”€ lib/                # í”Œë«í¼ ë…ë¦½ì  ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ types/              # ê³µí†µ íƒ€ì… ì •ì˜
â””â”€â”€ styles/             # Tailwind CSS
```

#### 2ë‹¨ê³„: Next.js ì¤€ë¹„ (3-4ê°œì›”)
```typescript
// Next.js í˜¸í™˜ì„±ì„ ê³ ë ¤í•œ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„
'use client'; // í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ëª…ì‹œ

export const SubscriptionCard = ({ subscription }: Props) => {
  // Reactì™€ Next.jsì—ì„œ ëª¨ë‘ ë™ì‘í•˜ëŠ” ì»´í¬ë„ŒíŠ¸
  return (
    <div className="font-pretendard antialiased">
      {/* ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ */}
    </div>
  );
};
```

#### 3ë‹¨ê³„: Next.js ì™„ì „ ë§ˆì´ê·¸ë ˆì´ì…˜ (4-6ê°œì›”)
```typescript
// Next.js App Router êµ¬ì¡°
app/
â”œâ”€â”€ (auth)/             # ì¸ì¦ ê´€ë ¨ ë¼ìš°íŠ¸
â”œâ”€â”€ dashboard/          # ëŒ€ì‹œë³´ë“œ í˜ì´ì§€
â”œâ”€â”€ subscriptions/      # êµ¬ë… ê´€ë¦¬ í˜ì´ì§€
â”œâ”€â”€ api/               # API Routes (í™•ì¥ ê¸°ëŠ¥)
â”œâ”€â”€ globals.css        # ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼
â”œâ”€â”€ layout.tsx         # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â””â”€â”€ page.tsx           # í™ˆí˜ì´ì§€
```

### Backend & Infrastructure

#### Current (React + Supabase)
- **Database**: Supabase PostgreSQL
- **Authentication**: Supabase Auth
- **Real-time**: Supabase Realtime
- **Storage**: Supabase Storage
- **Hosting**: GitHub Pages
- **Domain**: xxx.moonwave.kr

#### Future (Next.js + Enhanced)
- **Database**: Supabase PostgreSQL (ìœ ì§€)
- **Authentication**: NextAuth.js + Supabase Auth (í™•ì¥)
- **API Layer**: Next.js API Routes + Supabase
- **Caching**: Next.js Built-in Caching + Redis (ì„ íƒ)
- **Hosting**: Vercel (Next.js ìµœì í™”)
- **CDN**: Vercel Edge Network
- **Analytics**: Vercel Analytics + Google Analytics

### Technology Stack Comparison

| ê¸°ëŠ¥ | React + Vite | Next.js 14+ | ë¹„ê³  |
|------|-------------|-------------|------|
| **ê°œë°œ ì†ë„** | â­â­â­â­â­ | â­â­â­â­ | MVP ë¹ ë¥¸ ê°œë°œ |
| **SEO** | â­â­ | â­â­â­â­â­ | ê²€ìƒ‰ ìµœì í™” |
| **ì„±ëŠ¥** | â­â­â­â­ | â­â­â­â­â­ | SSR, SSG, ìµœì í™” |
| **í™•ì¥ì„±** | â­â­â­ | â­â­â­â­â­ | í’€ìŠ¤íƒ í™•ì¥ |
| **í•™ìŠµê³¡ì„ ** | â­â­â­â­â­ | â­â­â­ | íŒ€ ìƒì‚°ì„± |
| **ë°°í¬ ë³µì¡ë„** | â­â­â­â­â­ | â­â­â­â­ | ë°°í¬ í¸ì˜ì„± |

## ğŸ—ƒ í™•ì¥ ê°€ëŠ¥í•œ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### ERD (Entity Relationship Diagram) - Next.js í™•ì¥ ê³ ë ¤
```
users (Next.js í™•ì¥ ì‹œ ì¶”ê°€)
â”œâ”€â”€ id (UUID, PK)
â”œâ”€â”€ email (TEXT, UNIQUE)
â”œâ”€â”€ name (TEXT)
â”œâ”€â”€ image (TEXT) // NextAuth.js í˜¸í™˜
â”œâ”€â”€ email_verified (TIMESTAMP) // NextAuth.js í˜¸í™˜
â”œâ”€â”€ created_at (TIMESTAMP)
â””â”€â”€ updated_at (TIMESTAMP)

profiles (í˜„ì¬ Supabase Auth ì—°ë™)
â”œâ”€â”€ id (UUID, PK, FK â†’ auth.users.id)
â”œâ”€â”€ email (TEXT, UNIQUE)
â”œâ”€â”€ name (TEXT)
â”œâ”€â”€ avatar_url (TEXT)
â”œâ”€â”€ subscription_count (INTEGER)
â”œâ”€â”€ total_monthly_cost (DECIMAL)
â”œâ”€â”€ preferences (JSONB) // í™•ì¥: ì‚¬ìš©ì ì„¤ì •
â”œâ”€â”€ timezone (TEXT) // í™•ì¥: ì‹œê°„ëŒ€ ì„¤ì •
â”œâ”€â”€ created_at (TIMESTAMP)
â””â”€â”€ updated_at (TIMESTAMP)

subscriptions (í™•ì¥ ê°€ëŠ¥í•œ êµ¬ë… í…Œì´ë¸”)
â”œâ”€â”€ id (UUID, PK)
â”œâ”€â”€ user_id (UUID, FK â†’ profiles.id)
â”œâ”€â”€ name (TEXT)
â”œâ”€â”€ description (TEXT)
â”œâ”€â”€ price (DECIMAL)
â”œâ”€â”€ currency (TEXT)
â”œâ”€â”€ billing_cycle (TEXT)
â”œâ”€â”€ next_billing_date (DATE)
â”œâ”€â”€ category (TEXT)
â”œâ”€â”€ icon_url (TEXT)
â”œâ”€â”€ website_url (TEXT)
â”œâ”€â”€ is_active (BOOLEAN)
â”œâ”€â”€ metadata (JSONB) // í™•ì¥: ì¶”ê°€ ë©”íƒ€ë°ì´í„°
â”œâ”€â”€ external_id (TEXT) // í™•ì¥: ì™¸ë¶€ API ì—°ë™ ID
â”œâ”€â”€ created_at (TIMESTAMP)
â””â”€â”€ updated_at (TIMESTAMP)

payment_history (ê²°ì œ ì´ë ¥)
â”œâ”€â”€ id (UUID, PK)
â”œâ”€â”€ subscription_id (UUID, FK â†’ subscriptions.id)
â”œâ”€â”€ amount (DECIMAL)
â”œâ”€â”€ currency (TEXT)
â”œâ”€â”€ payment_date (DATE)
â”œâ”€â”€ status (TEXT)
â”œâ”€â”€ payment_method (TEXT) // í™•ì¥: ê²°ì œ ë°©ë²•
â”œâ”€â”€ receipt_url (TEXT) // í™•ì¥: ì˜ìˆ˜ì¦ URL
â”œâ”€â”€ created_at (TIMESTAMP)
â””â”€â”€ updated_at (TIMESTAMP)

notifications (í™•ì¥: ì•Œë¦¼ ì‹œìŠ¤í…œ)
â”œâ”€â”€ id (UUID, PK)
â”œâ”€â”€ user_id (UUID, FK â†’ profiles.id)
â”œâ”€â”€ type (TEXT) // billing_reminder, price_change, etc.
â”œâ”€â”€ title (TEXT)
â”œâ”€â”€ message (TEXT)
â”œâ”€â”€ is_read (BOOLEAN)
â”œâ”€â”€ scheduled_at (TIMESTAMP)
â”œâ”€â”€ sent_at (TIMESTAMP)
â”œâ”€â”€ metadata (JSONB)
â””â”€â”€ created_at (TIMESTAMP)

categories (í™•ì¥: ì‚¬ìš©ì ì •ì˜ ì¹´í…Œê³ ë¦¬)
â”œâ”€â”€ id (UUID, PK)
â”œâ”€â”€ user_id (UUID, FK â†’ profiles.id)
â”œâ”€â”€ name (TEXT)
â”œâ”€â”€ color (TEXT)
â”œâ”€â”€ icon (TEXT)
â”œâ”€â”€ is_default (BOOLEAN)
â””â”€â”€ created_at (TIMESTAMP)
```

### í™•ì¥ ì‹œë‚˜ë¦¬ì˜¤ë³„ ë°ì´í„° ëª¨ë¸

#### Next.js + NextAuth.js í†µí•©
```sql
-- NextAuth.js í˜¸í™˜ í…Œì´ë¸” (Next.js í™•ì¥ ì‹œ)
CREATE TABLE accounts (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  type TEXT NOT NULL,
  provider TEXT NOT NULL,
  provider_account_id TEXT NOT NULL,
  refresh_token TEXT,
  access_token TEXT,
  expires_at INTEGER,
  token_type TEXT,
  scope TEXT,
  id_token TEXT,
  session_state TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(provider, provider_account_id)
);

CREATE TABLE sessions (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  session_token TEXT UNIQUE NOT NULL,
  user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  expires TIMESTAMP WITH TIME ZONE NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### ë°ì´í„° ì œì•½ì‚¬í•­
- **RLS (Row Level Security)**: ëª¨ë“  í…Œì´ë¸” ì ìš©
- **Cascade Delete**: ì‚¬ìš©ì ì‚­ì œ ì‹œ ê´€ë ¨ ë°ì´í„° ëª¨ë‘ ì‚­ì œ
- **Data Validation**: í´ë¼ì´ì–¸íŠ¸ + ì„œë²„ ì´ì¤‘ ê²€ì¦

## ğŸ”„ í™•ì¥ ê°€ëŠ¥í•œ API ì„¤ê³„

### Current: Supabase Client API (React Phase)
```typescript
// êµ¬ë… ì¡°íšŒ (React + Supabase)
const { data, error } = await supabase
  .from('subscriptions')
  .select('*')
  .eq('user_id', user.id)
  .eq('is_active', true)
  .order('created_at', { ascending: false });
```

### Future: Next.js API Routes (í™•ì¥ Phase)
```typescript
// app/api/subscriptions/route.ts (Next.js App Router)
import { NextRequest, NextResponse } from 'next/server';
import { createRouteHandlerClient } from '@supabase/auth-helpers-nextjs';

export async function GET(request: NextRequest) {
  const supabase = createRouteHandlerClient({ cookies });
  const { searchParams } = new URL(request.url);
  
  const page = parseInt(searchParams.get('page') || '1');
  const limit = parseInt(searchParams.get('limit') || '10');
  const category = searchParams.get('category');
  
  try {
    let query = supabase
      .from('subscriptions')
      .select('*, payment_history(*)')
      .eq('is_active', true)
      .order('created_at', { ascending: false })
      .range((page - 1) * limit, page * limit - 1);
    
    if (category) {
      query = query.eq('category', category);
    }
    
    const { data, error, count } = await query;
    
    if (error) throw error;
    
    return NextResponse.json({
      data,
      pagination: {
        page,
        limit,
        total: count,
        totalPages: Math.ceil((count || 0) / limit)
      }
    });
  } catch (error) {
    return NextResponse.json(
      { error: 'Failed to fetch subscriptions' },
      { status: 500 }
    );
  }
}

export async function POST(request: NextRequest) {
  const supabase = createRouteHandlerClient({ cookies });
  const body = await request.json();
  
  // ì…ë ¥ ê²€ì¦
  const validatedData = subscriptionSchema.parse(body);
  
  try {
    const { data, error } = await supabase
      .from('subscriptions')
      .insert({
        ...validatedData,
        user_id: (await supabase.auth.getUser()).data.user?.id
      })
      .select()
      .single();
    
    if (error) throw error;
    
    // í™•ì¥: ì•Œë¦¼ ìƒì„±, ì™¸ë¶€ API ì—°ë™ ë“±
    await createBillingReminder(data);
    
    return NextResponse.json({ data }, { status: 201 });
  } catch (error) {
    return NextResponse.json(
      { error: 'Failed to create subscription' },
      { status: 500 }
    );
  }
}
```

### API Evolution Path
```typescript
// Phase 1: Direct Supabase (React)
const useSubscriptions = () => {
  // Direct Supabase client calls
};

// Phase 2: Hybrid (Next.js with Supabase)
const useSubscriptions = () => {
  // Next.js API Routes + Supabase
  return useSWR('/api/subscriptions', fetcher);
};

// Phase 3: Full API (Next.js + External Services)
const useSubscriptions = () => {
  // Next.js API Routes + Supabase + External APIs
  return useQuery(['subscriptions'], 
    () => fetch('/api/subscriptions').then(res => res.json())
  );
};
```

### í™•ì¥ ê°€ëŠ¥í•œ API ì•„í‚¤í…ì²˜

#### Middleware Layer (Next.js í™•ì¥ ì‹œ)
```typescript
// middleware.ts
import { NextResponse } from 'next/server';
import { createMiddlewareClient } from '@supabase/auth-helpers-nextjs';

export async function middleware(req: NextRequest) {
  const res = NextResponse.next();
  const supabase = createMiddlewareClient({ req, res });
  
  // ì¸ì¦ í™•ì¸
  const { data: { session } } = await supabase.auth.getSession();
  
  // API ë¼ìš°íŠ¸ ë³´í˜¸
  if (req.nextUrl.pathname.startsWith('/api/') && !session) {
    return NextResponse.json(
      { error: 'Unauthorized' }, 
      { status: 401 }
    );
  }
  
  // í˜ì´ì§€ ë³´í˜¸
  if (req.nextUrl.pathname.startsWith('/dashboard') && !session) {
    return NextResponse.redirect(new URL('/auth/signin', req.url));
  }
  
  return res;
}

export const config = {
  matcher: ['/api/:path*', '/dashboard/:path*']
};
```

#### Service Layer Pattern
```typescript
// lib/services/subscriptionService.ts
export class SubscriptionService {
  constructor(private supabase: SupabaseClient) {}
  
  async getSubscriptions(userId: string, options?: {
    page?: number;
    limit?: number;
    category?: string;
  }) {
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„
  }
  
  async createSubscription(data: CreateSubscriptionData) {
    // ì…ë ¥ ê²€ì¦, ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ì ìš©
    // ì™¸ë¶€ API ì—°ë™ (ì„ íƒ)
    // ì•Œë¦¼ ìƒì„± ë“±
  }
  
  async updateSubscription(id: string, data: UpdateSubscriptionData) {
    // ì—…ë°ì´íŠ¸ ë¡œì§
  }
  
  async deleteSubscription(id: string, soft: boolean = true) {
    // ì†Œí”„íŠ¸/í•˜ë“œ ì‚­ì œ ë¡œì§
  }
}
```

## ğŸ” ë³´ì•ˆ ì •ì±…

### ì¸ì¦ ë° ê¶Œí•œ
- **Authentication**: Supabase Auth (Magic Link, OAuth)
- **Authorization**: RLS ê¸°ë°˜ í–‰ ë‹¨ìœ„ ì ‘ê·¼ ì œì–´
- **Session**: JWT í† í° ê¸°ë°˜ ì„¸ì…˜ ê´€ë¦¬

### ë°ì´í„° ë³´í˜¸
- **Encryption**: Database ë ˆë²¨ ì•”í˜¸í™” (Supabase ê¸°ë³¸)
- **Privacy**: ì‚¬ìš©ì ë°ì´í„° ê²©ë¦¬ (RLS)
- **Backup**: ìë™ ë°±ì—… (Supabase ê´€ë¦¬)

## ğŸ“± í™•ì¥ ê°€ëŠ¥í•œ í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜

### Component Architecture (React â†’ Next.js í˜¸í™˜)

#### í˜„ì¬ React êµ¬ì¡° (Next.js í˜¸í™˜ì„± ê³ ë ¤)
```typescript
// src/components/ui/Button.tsx
'use client'; // Next.js í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ëŒ€ë¹„

import React from 'react';
import { cn } from '@/lib/utils';

interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'destructive' | 'ghost';
  size?: 'sm' | 'md' | 'lg';
  loading?: boolean; // í™•ì¥: ë¡œë”© ìƒíƒœ
}

export const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant = 'primary', size = 'md', loading = false, children, ...props }, ref) => {
    return (
      <button
        ref={ref}
        className={cn(
          'font-pretendard antialiased font-medium rounded-lg',
          'transition-colors duration-200',
          'focus:outline-none focus:ring-2 focus:ring-blue-500',
          'disabled:opacity-50 disabled:cursor-not-allowed',
          // variant ìŠ¤íƒ€ì¼...
          className
        )}
        disabled={loading || props.disabled}
        {...props}
      >
        {loading ? (
          <div className="flex items-center gap-2">
            <div className="w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin" />
            ë¡œë”©ì¤‘...
          </div>
        ) : children}
      </button>
    );
  }
);

Button.displayName = 'Button';
```

#### Next.js í™•ì¥ êµ¬ì¡°
```typescript
// Next.js App Router êµ¬ì¡°
app/
â”œâ”€â”€ globals.css
â”œâ”€â”€ layout.tsx              # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”œâ”€â”€ page.tsx               # í™ˆí˜ì´ì§€
â”œâ”€â”€ loading.tsx            # ë¡œë”© UI
â”œâ”€â”€ error.tsx              # ì—ëŸ¬ UI
â”œâ”€â”€ not-found.tsx          # 404 í˜ì´ì§€
â”œâ”€â”€ (auth)/                # ë¼ìš°íŠ¸ ê·¸ë£¹ (ì¸ì¦)
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”œâ”€â”€ signin/
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â””â”€â”€ signup/
â”‚       â””â”€â”€ page.tsx
â”œâ”€â”€ dashboard/             # ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”œâ”€â”€ page.tsx
â”‚   â”œâ”€â”€ loading.tsx
â”‚   â””â”€â”€ subscriptions/
â”‚       â”œâ”€â”€ page.tsx
â”‚       â”œâ”€â”€ [id]/
â”‚       â”‚   â”œâ”€â”€ page.tsx
â”‚       â”‚   â””â”€â”€ edit/
â”‚       â”‚       â””â”€â”€ page.tsx
â”‚       â””â”€â”€ new/
â”‚           â””â”€â”€ page.tsx
â”œâ”€â”€ api/                   # API Routes
â”‚   â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ subscriptions/
â”‚   â””â”€â”€ analytics/
â””â”€â”€ components/            # ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸ (í˜„ì¬ì™€ ë™ì¼)
    â”œâ”€â”€ ui/
    â”œâ”€â”€ features/
    â””â”€â”€ layout/
```

### State Management Evolution

#### Current: React Context + Zustand
```typescript
// stores/useSubscriptionStore.ts (React + Next.js í˜¸í™˜)
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

interface SubscriptionStore {
  subscriptions: Subscription[];
  loading: boolean;
  error: string | null;
  fetchSubscriptions: () => Promise<void>;
  addSubscription: (data: CreateSubscriptionData) => Promise<void>;
  updateSubscription: (id: string, data: UpdateSubscriptionData) => Promise<void>;
  deleteSubscription: (id: string) => Promise<void>;
}

export const useSubscriptionStore = create<SubscriptionStore>()(
  persist(
    (set, get) => ({
      subscriptions: [],
      loading: false,
      error: null,
      
      fetchSubscriptions: async () => {
        set({ loading: true, error: null });
        try {
          // React: direct Supabase call
          // Next.js: API route call
          const data = await subscriptionService.getSubscriptions();
          set({ subscriptions: data, loading: false });
        } catch (error) {
          set({ error: error.message, loading: false });
        }
      },
      
      // ... ê¸°íƒ€ ë©”ì„œë“œ
    }),
    {
      name: 'subscription-storage',
      partialize: (state) => ({ 
        subscriptions: state.subscriptions 
      })
    }
  )
);
```

#### Next.js Server Components Integration
```typescript
// app/dashboard/subscriptions/page.tsx (Next.js Server Component)
import { Suspense } from 'react';
import { SubscriptionList } from '@/components/features/subscriptions/SubscriptionList';
import { SubscriptionSkeleton } from '@/components/ui/SubscriptionSkeleton';

// ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°ì´í„° pre-fetch
async function getSubscriptions() {
  // ì„œë²„ì—ì„œ ì§ì ‘ Supabase í˜¸ì¶œ (ìºì‹± ê°€ëŠ¥)
  const supabase = createServerComponentClient();
  const { data } = await supabase
    .from('subscriptions')
    .select('*')
    .eq('is_active', true);
  
  return data;
}

export default async function SubscriptionsPage() {
  const initialSubscriptions = await getSubscriptions();
  
  return (
    <div className="container mx-auto py-8">
      <h1 className="font-pretendard text-3xl font-bold mb-8">
        êµ¬ë… ê´€ë¦¬
      </h1>
      
      <Suspense fallback={<SubscriptionSkeleton />}>
        <SubscriptionList initialData={initialSubscriptions} />
      </Suspense>
    </div>
  );
}

// ë©”íƒ€ë°ì´í„° (SEO ìµœì í™”)
export const metadata = {
  title: 'êµ¬ë… ê´€ë¦¬ - Moonwave',
  description: 'ëª¨ë“  êµ¬ë… ì„œë¹„ìŠ¤ë¥¼ í•œ ê³³ì—ì„œ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ì„¸ìš”',
  openGraph: {
    title: 'êµ¬ë… ê´€ë¦¬ - Moonwave',
    description: 'ìŠ¤ë§ˆíŠ¸í•œ êµ¬ë… ê´€ë¦¬ ì‹œìŠ¤í…œ',
    url: 'https://moonwave.kr/dashboard/subscriptions'
  }
};
```

### Performance Optimization Strategy

#### React (Current)
```typescript
// React ìµœì í™” íŒ¨í„´
const SubscriptionCard = React.memo(({ subscription }: Props) => {
  const handleEdit = useCallback(() => {
    // í¸ì§‘ ë¡œì§
  }, [subscription.id]);
  
  return (
    <div className="@container">
      {/* ì»´í¬ë„ŒíŠ¸ ë‚´ìš© */}
    </div>
  );
});
```

#### Next.js (Future)
```typescript
// Next.js ìµœì í™” íŒ¨í„´
import dynamic from 'next/dynamic';
import Image from 'next/image';

// ë™ì  ì„í¬íŠ¸ (ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…)
const SubscriptionForm = dynamic(
  () => import('@/components/features/subscriptions/SubscriptionForm'),
  { 
    loading: () => <FormSkeleton />,
    ssr: false // í´ë¼ì´ì–¸íŠ¸ì—ì„œë§Œ ë¡œë“œ
  }
);

// ì´ë¯¸ì§€ ìµœì í™”
export const SubscriptionIcon = ({ src, alt }: Props) => (
  <Image
    src={src}
    alt={alt}
    width={48}
    height={48}
    className="rounded-lg"
    priority={false}
    placeholder="blur"
    blurDataURL="data:image/jpeg;base64,..."
  />
);

// í˜ì´ì§€ ë ˆë²¨ ìºì‹±
export const revalidate = 3600; // 1ì‹œê°„ ìºì‹œ
```

## ğŸš€ í™•ì¥ ê°€ëŠ¥í•œ ë°°í¬ ì „ëµ

### Current Deployment (React + GitHub Pages)
```yaml
# .github/workflows/react-deploy.yml
name: React App Deploy
on:
  push:
    branches: [main]

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'
    
    - run: npm ci
    - run: npm run type-check
    - run: npm run build
    
    - uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./dist
        cname: moonwave.kr
```

### Future Deployment (Next.js + Vercel)
```yaml
# .github/workflows/nextjs-deploy.yml (ë°±ì—… ë°°í¬)
name: Next.js Deploy to Vercel
on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'
    
    - run: npm ci
    - run: npm run build
    - run: npm run test # ì¶”ê°€ëœ í…ŒìŠ¤íŠ¸
    
    - uses: amondnet/vercel-action@v25
      with:
        vercel-token: ${{ secrets.VERCEL_TOKEN }}
        vercel-org-id: ${{ secrets.ORG_ID }}
        vercel-project-id: ${{ secrets.PROJECT_ID }}
        vercel-args: '--prod'
```

### Migration Deployment Strategy
```typescript
// ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ ë°°í¬ ì „ëµ

// Phase 1: React (MVP) - GitHub Pages
Domain: moonwave.kr
Hosting: GitHub Pages
CDN: Cloudflare (ì„ íƒ)
SSL: GitHub Pages ìë™

// Phase 2: Parallel Deployment
React App: moonwave.kr (í˜„ì¬ ì‚¬ìš©ì ìœ ì§€)
Next.js App: beta.moonwave.kr (ë² íƒ€ í…ŒìŠ¤íŠ¸)

// Phase 3: Full Migration
React App: legacy.moonwave.kr (í´ë°±)
Next.js App: moonwave.kr (ë©”ì¸ ì„œë¹„ìŠ¤)

// Phase 4: Legacy Deprecation
Next.js App: moonwave.kr (ì™„ì „ ì´ì „)
```

### Infrastructure Comparison

| ê¸°ëŠ¥ | GitHub Pages | Vercel | ë¹„ê³  |
|------|-------------|--------|------|
| **ë°°í¬ ì†ë„** | â­â­â­ | â­â­â­â­â­ | Vercel ë” ë¹ ë¦„ |
| **ë¬´ë£Œ í•œë„** | ë¬´ì œí•œ | ì›” 100GB | GitHub ìœ ë¦¬ |
| **ì»¤ìŠ¤í…€ ë„ë©”ì¸** | â­â­â­â­â­ | â­â­â­â­â­ | ë‘˜ ë‹¤ ì§€ì› |
| **SSL ì¸ì¦ì„œ** | ìë™ | ìë™ | ë‘˜ ë‹¤ ìë™ |
| **ì„±ëŠ¥ ìµœì í™”** | â­â­â­ | â­â­â­â­â­ | Vercel Edge ìš°ìˆ˜ |
| **Next.js ìµœì í™”** | âŒ | â­â­â­â­â­ | Vercel ì „ìš© ìµœì í™” |
| **Serverless Functions** | âŒ | â­â­â­â­â­ | Next.js API Routes |
| **Analytics** | ì™¸ë¶€ ì—°ë™ | ë‚´ì¥ | Vercel í¸ë¦¬ |

### Environment Configuration

#### React Environment
```typescript
// .env.example (React)
VITE_SUPABASE_URL=https://project.supabase.co
VITE_SUPABASE_ANON_KEY=eyJ...
VITE_SITE_URL=https://moonwave.kr
VITE_ENVIRONMENT=production
```

#### Next.js Environment
```typescript
// .env.example (Next.js)
# Public (í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥)
NEXT_PUBLIC_SUPABASE_URL=https://project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...
NEXT_PUBLIC_SITE_URL=https://moonwave.kr

# Private (ì„œë²„ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥)
SUPABASE_SERVICE_ROLE_KEY=eyJ... # ì„œë²„ ì „ìš© í‚¤
NEXTAUTH_SECRET=your-secret-here
NEXTAUTH_URL=https://moonwave.kr

# Analytics & Monitoring
VERCEL_ANALYTICS_ID=your-analytics-id
SENTRY_DSN=your-sentry-dsn
```

### Performance Monitoring Evolution

#### Current (React)
```typescript
// ê¸°ë³¸ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
export const usePerformanceMonitoring = () => {
  useEffect(() => {
    const observer = new PerformanceObserver((list) => {
      list.getEntries().forEach((entry) => {
        if (entry.entryType === 'largest-contentful-paint') {
          console.log('LCP:', entry.startTime);
        }
      });
    });
    observer.observe({ entryTypes: ['largest-contentful-paint'] });
    return () => observer.disconnect();
  }, []);
};
```

#### Future (Next.js + Vercel)
```typescript
// app/lib/analytics.ts (Next.js)
import { track } from '@vercel/analytics';
import { SpeedInsights } from '@vercel/speed-insights/next';

// ì‚¬ìš©ì í–‰ë™ ì¶”ì 
export const trackEvent = (name: string, properties?: object) => {
  track(name, properties);
};

// ì„±ëŠ¥ ì§€í‘œ ìë™ ìˆ˜ì§‘
export function Analytics() {
  return (
    <>
      <SpeedInsights />
      {/* Core Web Vitals ìë™ ìˆ˜ì§‘ */}
    </>
  );
}

// ì‚¬ìš©ë²• in layout.tsx
export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="ko">
      <body className="font-pretendard">
        {children}
        <Analytics />
      </body>
    </html>
  );
}
```

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë¶„ì„

### ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- **Core Web Vitals**: LCP, FID, CLS
- **Bundle Size**: Webpack Bundle Analyzer
- **Loading Time**: Performance API

### ì‚¬ìš©ì ë¶„ì„
- **User Behavior**: ì‚¬ìš© íŒ¨í„´ ë¶„ì„
- **Feature Usage**: ê¸°ëŠ¥ë³„ ì‚¬ìš©ë¥ 
- **Error Tracking**: ì—ëŸ¬ ë¡œê·¸ ìˆ˜ì§‘

## ğŸ”§ í™•ì¥ ê°€ëŠ¥í•œ ê°œë°œ ë„êµ¬ ë° ì›Œí¬í”Œë¡œìš°

### Development Tools Evolution

#### Current Tools (React Phase)
```json
{
  "devDependencies": {
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@vitejs/plugin-react": "^4.0.0",
    "autoprefixer": "^10.4.0",
    "eslint": "^8.45.0",
    "postcss": "^8.4.0",
    "tailwindcss": "^3.3.0",
    "@tailwindcss/container-queries": "^0.1.1",
    "typescript": "^5.0.0",
    "vite": "^4.4.0"
  }
}
```

#### Next.js Tools (Future)
```json
{
  "devDependencies": {
    "@types/node": "^20.0.0",
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "@next/eslint-config-next": "^14.0.0",
    "eslint": "^8.45.0",
    "eslint-config-next": "^14.0.0",
    "postcss": "^8.4.0",
    "tailwindcss": "^3.3.0",
    "@tailwindcss/container-queries": "^0.1.1",
    "typescript": "^5.0.0",
    
    // ì¶”ê°€ ë„êµ¬
    "@testing-library/react": "^13.4.0",
    "@testing-library/jest-dom": "^6.0.0",
    "jest": "^29.0.0",
    "jest-environment-jsdom": "^29.0.0",
    "@playwright/test": "^1.40.0",
    "husky": "^8.0.0",
    "lint-staged": "^15.0.0"
  }
}
```

### Testing Strategy (Next.js í™•ì¥ ì‹œ)

#### Unit Testing
```typescript
// __tests__/components/SubscriptionCard.test.tsx
import { render, screen } from '@testing-library/react';
import { SubscriptionCard } from '@/components/features/subscriptions/SubscriptionCard';

const mockSubscription = {
  id: '1',
  name: 'Netflix Premium',
  price: 17000,
  currency: 'KRW',
  billing_cycle: 'monthly',
  next_billing_date: '2025-08-15'
};

describe('SubscriptionCard', () => {
  it('renders subscription information correctly', () => {
    render(<SubscriptionCard subscription={mockSubscription} />);
    
    expect(screen.getByText('Netflix Premium')).toBeInTheDocument();
    expect(screen.getByText('â‚©17,000')).toBeInTheDocument();
  });
  
  it('displays next billing date in Korean format', () => {
    render(<SubscriptionCard subscription={mockSubscription} />);
    
    expect(screen.getByText(/2025ë…„ 8ì›” 15ì¼/)).toBeInTheDocument();
  });
});
```

#### E2E Testing (Playwright)
```typescript
// e2e/subscription-management.spec.ts
import { test, expect } from '@playwright/test';

test.describe('Subscription Management', () => {
  test.beforeEach(async ({ page }) => {
    // í…ŒìŠ¤íŠ¸ ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸
    await page.goto('/auth/signin');
    await page.fill('[data-testid=email]', 'test@moonwave.kr');
    await page.click('[data-testid=signin-button]');
    await page.waitForURL('/dashboard');
  });

  test('should add new subscription', async ({ page }) => {
    await page.goto('/dashboard/subscriptions');
    await page.click('[data-testid=add-subscription]');
    
    await page.fill('[data-testid=subscription-name]', 'Spotify Premium');
    await page.fill('[data-testid=subscription-price]', '10900');
    await page.selectOption('[data-testid=billing-cycle]', 'monthly');
    
    await page.click('[data-testid=save-subscription]');
    
    await expect(page.locator('text=Spotify Premium')).toBeVisible();
  });
});
```

### Code Quality & CI/CD Enhancement

#### Pre-commit Hooks
```json
// package.json
{
  "scripts": {
    "prepare": "husky install",
    "lint": "next lint",
    "type-check": "tsc --noEmit",
    "test": "jest",
    "test:e2e": "playwright test",
    "test:coverage": "jest --coverage"
  },
  "lint-staged": {
    "*.{js,jsx,ts,tsx}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{css,scss,md}": [
      "prettier --write"
    ]
  }
}

// .husky/pre-commit
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npm run type-check
npm run lint
npm run test
npx lint-staged
```

#### Enhanced CI/CD Pipeline
```yaml
# .github/workflows/nextjs-ci.yml
name: Next.js CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  quality-check:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'
    
    - run: npm ci
    
    # ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
    - name: Type Check
      run: npm run type-check
    
    - name: Lint Check
      run: npm run lint
    
    - name: Unit Tests
      run: npm run test:coverage
    
    - name: Upload Coverage
      uses: codecov/codecov-action@v3
    
    # E2E í…ŒìŠ¤íŠ¸ (Next.js í™•ì¥ ì‹œ)
    - name: Install Playwright
      run: npx playwright install
    
    - name: E2E Tests
      run: npm run test:e2e
    
    # ë¹Œë“œ í…ŒìŠ¤íŠ¸
    - name: Build Check
      run: npm run build
    
    # ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (Lighthouse CI)
    - name: Lighthouse CI
      uses: treosh/lighthouse-ci-action@v10
      with:
        configPath: './lighthouserc.json'
        uploadArtifacts: true

  deploy:
    needs: quality-check
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'
    
    - run: npm ci
    - run: npm run build
    
    # Vercel ë°°í¬ (Next.js)
    - uses: amondnet/vercel-action@v25
      with:
        vercel-token: ${{ secrets.VERCEL_TOKEN }}
        vercel-org-id: ${{ secrets.ORG_ID }}
        vercel-project-id: ${{ secrets.PROJECT_ID }}
        vercel-args: '--prod'
```

### Development Environment Setup

#### VS Code / Cursor Settings
```json
// .vscode/settings.json
{
  "typescript.preferences.includePackageJsonAutoImports": "auto",
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true,
    "source.organizeImports": true
  },
  "tailwindCSS.includeLanguages": {
    "typescript": "typescript",
    "typescriptreact": "typescriptreact"
  },
  "tailwindCSS.experimental.classRegex": [
    ["cn\\(([^)]*)\\)", "'([^']*)'"],
    ["clsx\\(([^)]*)\\)", "'([^']*)'"]
  ],
  "emmet.includeLanguages": {
    "typescript": "html",
    "typescriptreact": "html"
  }
}

// .vscode/extensions.json
{
  "recommendations": [
    "esbenp.prettier-vscode",
    "bradlc.vscode-tailwindcss",
    "ms-vscode.vscode-typescript-next",
    "streetsidesoftware.code-spell-checker",
    "ms-playwright.playwright"
  ]
}
```

## ğŸ“‹ Migration Timeline & Checklist

### Phase 1: React MVP (Month 1-2)
- [ ] GitHub Repository ì„¤ì •
- [ ] React + Vite + Supabase ê¸°ë³¸ êµ¬ì¡°
- [ ] Core ê¸°ëŠ¥ ê°œë°œ (CRUD)
- [ ] GitHub Pages ë°°í¬
- [ ] Next.js í˜¸í™˜ì„± ê³ ë ¤í•œ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

### Phase 2: Enhancement & Preparation (Month 3-4)
- [ ] ì„±ëŠ¥ ìµœì í™”
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
- [ ] Next.js ë§ˆì´ê·¸ë ˆì´ì…˜ ê³„íš ìˆ˜ë¦½
- [ ] ë² íƒ€ í™˜ê²½ êµ¬ì¶• (beta.moonwave.kr)

### Phase 3: Next.js Migration (Month 5-6)
- [ ] Next.js í”„ë¡œì íŠ¸ ì„¤ì •
- [ ] ì»´í¬ë„ŒíŠ¸ ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] API Routes êµ¬í˜„
- [ ] SSR/SSG ì ìš©
- [ ] Vercel ë°°í¬ ì„¤ì •

### Phase 4: Full Transition (Month 7-8)
- [ ] ì‚¬ìš©ì ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] ë„ë©”ì¸ ì „í™˜ (moonwave.kr â†’ Next.js)
- [ ] ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë° ìµœì í™”
- [ ] ë ˆê±°ì‹œ ì‹œìŠ¤í…œ ì œê±°

### ê¸°ìˆ  ê²°ì • ë§¤íŠ¸ë¦­ìŠ¤

| ê³ ë ¤ì‚¬í•­ | React (í˜„ì¬) | Next.js (ë¯¸ë˜) | ì¶”ì²œ ì‹œì  |
|----------|-------------|---------------|----------|
| **ê°œë°œ ì†ë„** | â­â­â­â­â­ | â­â­â­ | MVP ë‹¨ê³„ |
| **SEO ìš”êµ¬ì‚¬í•­** | â­â­ | â­â­â­â­â­ | ë§ˆì¼€íŒ… í™•ì¥ ì‹œ |
| **íŒ€ í¬ê¸°** | 1-2ëª… | 3ëª…+ | íŒ€ í™•ì¥ ì‹œ |
| **íŠ¸ë˜í”½ ê·œëª¨** | ~1K MAU | 10K+ MAU | ì‚¬ìš©ì ì¦ê°€ ì‹œ |
| **ê¸°ëŠ¥ ë³µì¡ë„** | Simple CRUD | Complex Business Logic | ê¸°ëŠ¥ í™•ì¥ ì‹œ |
| **ìš´ì˜ ë³µì¡ë„** | ë‹¨ìˆœ | ì¤‘ê°„ | ìš´ì˜íŒ€ êµ¬ì„± ì‹œ |

**ğŸ’¡ ê¶Œì¥ ì „ëµ**: Reactë¡œ ë¹ ë¥¸ MVP ì¶œì‹œ â†’ ì‹œì¥ ê²€ì¦ í›„ Next.jsë¡œ í™•ì¥
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [ ] ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ ì‘ì„±
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ERD ì„¤ê³„
- [ ] API ì—”ë“œí¬ì¸íŠ¸ ì •ì˜
- [ ] ë³´ì•ˆ ì •ì±… ìˆ˜ë¦½
- [ ] ë°°í¬ ì „ëµ ê³„íš

---

### ğŸ¨ **TIER 2: ì„¤ê³„ ë¬¸ì„œ (Phase 1 ì§„í–‰ ì¤‘ ì‘ì„±)**

#### 2.1 UI/UX ë””ìì¸ ì‹œìŠ¤í…œ ë¬¸ì„œ
```markdown
# Moonwave UI/UX ë””ìì¸ ì‹œìŠ¤í…œ v1.0

## ğŸ¨ ë””ìì¸ ì² í•™
- **Utility-First**: Tailwind CSS ê¸°ë°˜ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„
- **Korean Typography**: Pretendard í°íŠ¸ í•œê¸€ ìµœì í™”
- **Container Responsive**: ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ë°˜ì‘í˜• ë””ìì¸
- **Accessibility First**: ì ‘ê·¼ì„± ìš°ì„  ì„¤ê³„

## ğŸŒŠ ë¸Œëœë“œ ì•„ì´ë´í‹°í‹°
- **Primary Color**: Blue (#3b82f6) - ì‹ ë¢°ê°, ì•ˆì •ì„±
- **Secondary Color**: Purple (#8b5cf6) - í˜ì‹ , ì°½ì˜ì„±
- **Success**: Green (#10b981) - ì„±ê³µ, ì„±ì¥
- **Warning**: Yellow (#f59e0b) - ì£¼ì˜, ì•Œë¦¼
- **Error**: Red (#ef4444) - ìœ„í—˜, ì˜¤ë¥˜

## ğŸ“± ì»´í¬ë„ŒíŠ¸ ê°€ì´ë“œë¼ì¸

### ì¹´ë“œ (Card)
```tsx
// ê¸°ë³¸ êµ¬ë… ì¹´ë“œ
<Card className="@container p-6">
  <div className="@lg:flex-row flex flex-col @lg:items-center">
    <!-- êµ¬ë… ì •ë³´ -->
  </div>
</Card>
```

### ë²„íŠ¼ (Button)
- **Primary**: ì£¼ìš” ì•¡ì…˜ (êµ¬ë… ì¶”ê°€, ì €ì¥)
- **Secondary**: ë³´ì¡° ì•¡ì…˜ (ì·¨ì†Œ, í¸ì§‘)
- **Destructive**: ìœ„í—˜ ì•¡ì…˜ (ì‚­ì œ)

### íƒ€ì´í¬ê·¸ë˜í”¼
- **ì œëª©**: font-bold, tracking-korean-tight
- **ë³¸ë¬¸**: font-normal, tracking-korean-normal
- **ìº¡ì…˜**: font-medium, text-sm

## ğŸ“ ë ˆì´ì•„ì›ƒ ì‹œìŠ¤í…œ

### ê·¸ë¦¬ë“œ (Grid)
```css
/* ë°˜ì‘í˜• ê·¸ë¦¬ë“œ */
.subscription-grid {
  @apply grid gap-6;
  @apply grid-cols-1;
  @apply @lg:grid-cols-2;
  @apply @2xl:grid-cols-3;
}
```

### ê°„ê²© (Spacing)
- **Component Gap**: 1.5rem (24px)
- **Section Gap**: 3rem (48px)
- **Page Padding**: 1.5rem mobile, 3rem desktop

## ğŸ¯ ì‚¬ìš©ì ê²½í—˜ (UX)

### ì •ë³´ ì•„í‚¤í…ì²˜
```
Home Dashboard
â”œâ”€â”€ êµ¬ë… í˜„í™© ìš”ì•½
â”œâ”€â”€ ìµœê·¼ ê²°ì œ ë‚´ì—­
â”œâ”€â”€ ë‹¤ê°€ì˜¤ëŠ” ê²°ì œ ì•Œë¦¼
â””â”€â”€ ë¹ ë¥¸ ì•¡ì…˜ (êµ¬ë… ì¶”ê°€)

êµ¬ë… ê´€ë¦¬
â”œâ”€â”€ ì „ì²´ êµ¬ë… ëª©ë¡
â”œâ”€â”€ ì¹´í…Œê³ ë¦¬ë³„ í•„í„°
â”œâ”€â”€ ê²€ìƒ‰ ë° ì •ë ¬
â””â”€â”€ êµ¬ë… ìƒì„¸ ì •ë³´

ë¶„ì„ ë° ë¦¬í¬íŠ¸
â”œâ”€â”€ ì›”ê°„ ì§€ì¶œ ë¶„ì„
â”œâ”€â”€ ì¹´í…Œê³ ë¦¬ë³„ í†µê³„
â”œâ”€â”€ ì ˆì•½ ì œì•ˆ
â””â”€â”€ ì—°ê°„ ë¦¬í¬íŠ¸
```

### ì‚¬ìš©ì í”Œë¡œìš°
1. **ì²« ë°©ë¬¸**: ì˜¨ë³´ë”© â†’ ì²« êµ¬ë… ë“±ë¡
2. **ì¼ìƒ ì‚¬ìš©**: ëŒ€ì‹œë³´ë“œ í™•ì¸ â†’ êµ¬ë… ê´€ë¦¬
3. **ì •ê¸° ê´€ë¦¬**: ì›”ë§ ë¦¬ë·° â†’ ë¶ˆí•„ìš” êµ¬ë… ì •ë¦¬
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [ ] ë””ìì¸ í† í° ì •ì˜
- [ ] ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ê³„
- [ ] ì‚¬ìš©ì í”Œë¡œìš° ë§¤í•‘
- [ ] ì •ë³´ ì•„í‚¤í…ì²˜ êµ¬ì„±

---

#### 2.2 API ëª…ì„¸ì„œ (API Specification)
```markdown
# Moonwave API ëª…ì„¸ì„œ v1.0

## ğŸ“¡ API ê°œìš”
- **Base URL**: Supabase Client SDK ì‚¬ìš©
- **Authentication**: Bearer Token (JWT)
- **Data Format**: JSON
- **Error Handling**: HTTP Status Code + Error Message

## ğŸ” ì¸ì¦ (Authentication)

### ë¡œê·¸ì¸
```typescript
// Magic Link ë¡œê·¸ì¸
const { error } = await supabase.auth.signInWithOtp({
  email: 'user@example.com'
});

// OAuth ë¡œê·¸ì¸ (Google, GitHub)
const { error } = await supabase.auth.signInWithOAuth({
  provider: 'google'
});
```

### ë¡œê·¸ì•„ì›ƒ
```typescript
const { error } = await supabase.auth.signOut();
```

## ğŸ‘¤ ì‚¬ìš©ì í”„ë¡œí•„ (Profiles)

### í”„ë¡œí•„ ì¡°íšŒ
```typescript
GET /profiles
const { data, error } = await supabase
  .from('profiles')
  .select('*')
  .eq('id', user.id)
  .single();
```

### í”„ë¡œí•„ ì—…ë°ì´íŠ¸
```typescript
PATCH /profiles
const { data, error } = await supabase
  .from('profiles')
  .update({ name: 'ìƒˆ ì´ë¦„' })
  .eq('id', user.id);
```

## ğŸ’³ êµ¬ë… ê´€ë¦¬ (Subscriptions)

### êµ¬ë… ëª©ë¡ ì¡°íšŒ
```typescript
GET /subscriptions
const { data, error } = await supabase
  .from('subscriptions')
  .select(`
    *,
    payment_history (amount, payment_date, status)
  `)
  .eq('user_id', user.id)
  .eq('is_active', true)
  .order('created_at', { ascending: false });

Response: Subscription[]
```

### êµ¬ë… ìƒì„±
```typescript
POST /subscriptions
const { data, error } = await supabase
  .from('subscriptions')
  .insert({
    name: 'Netflix Premium',
    description: '4K ìŠ¤íŠ¸ë¦¬ë° ì„œë¹„ìŠ¤',
    price: 17000,
    currency: 'KRW',
    billing_cycle: 'monthly',
    next_billing_date: '2025-08-15',
    category: 'streaming'
  })
  .select();

Request Body: {
  name: string;
  description?: string;
  price: number;
  currency: 'KRW' | 'USD';
  billing_cycle: 'weekly' | 'monthly' | 'yearly';
  next_billing_date: string; // YYYY-MM-DD
  category: 'streaming' | 'software' | 'gaming' | 'news' | 'others';
  icon_url?: string;
  website_url?: string;
}

Response: Subscription
```

### êµ¬ë… ìˆ˜ì •
```typescript
PATCH /subscriptions/:id
const { data, error } = await supabase
  .from('subscriptions')
  .update({
    price: 19000,
    next_billing_date: '2025-09-15'
  })
  .eq('id', subscriptionId)
  .eq('user_id', user.id);
```

### êµ¬ë… ì‚­ì œ (ì†Œí”„íŠ¸ ì‚­ì œ)
```typescript
DELETE /subscriptions/:id
const { data, error } = await supabase
  .from('subscriptions')
  .update({ is_active: false })
  .eq('id', subscriptionId)
  .eq('user_id', user.id);
```

## ğŸ“Š ê²°ì œ ì´ë ¥ (Payment History)

### ê²°ì œ ì´ë ¥ ì¡°íšŒ
```typescript
GET /payment_history
const { data, error } = await supabase
  .from('payment_history')
  .select(`
    *,
    subscriptions (name, category)
  `)
  .eq('subscriptions.user_id', user.id)
  .order('payment_date', { ascending: false })
  .limit(50);
```

### ê²°ì œ ì´ë ¥ ì¶”ê°€
```typescript
POST /payment_history
const { data, error } = await supabase
  .from('payment_history')
  .insert({
    subscription_id: 'uuid',
    amount: 17000,
    currency: 'KRW',
    payment_date: '2025-07-26',
    status: 'completed'
  });
```

## ğŸ”„ ì‹¤ì‹œê°„ êµ¬ë… (Realtime Subscriptions)

### êµ¬ë… ë°ì´í„° ì‹¤ì‹œê°„ ë™ê¸°í™”
```typescript
// ì‹¤ì‹œê°„ êµ¬ë… ì„¤ì •
const subscription = supabase
  .channel('subscriptions_realtime')
  .on('postgres_changes', 
    { 
      event: '*', 
      schema: 'public', 
      table: 'subscriptions',
      filter: `user_id=eq.${user.id}`
    },
    (payload) => {
      console.log('ì‹¤ì‹œê°„ ë°ì´í„° ë³€ê²½:', payload);
      // UI ì—…ë°ì´íŠ¸ ë¡œì§
    }
  )
  .subscribe();

// êµ¬ë… í•´ì œ
subscription.unsubscribe();
```

## âŒ ì—ëŸ¬ ì²˜ë¦¬ (Error Handling)

### ì¼ë°˜ì ì¸ ì—ëŸ¬ ì½”ë“œ
```typescript
interface SupabaseError {
  message: string;
  code?: string;
  details?: string;
  hint?: string;
}

// ì£¼ìš” ì—ëŸ¬ ì¼€ì´ìŠ¤
const ERROR_CODES = {
  'PGRST116': 'ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤',
  '23505': 'ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë°ì´í„°ì…ë‹ˆë‹¤',
  '42501': 'ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤',
  'auth/user-not-found': 'ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤'
};
```

### ì—ëŸ¬ ì²˜ë¦¬ íŒ¨í„´
```typescript
try {
  const { data, error } = await supabase
    .from('subscriptions')
    .insert(subscriptionData);
    
  if (error) throw error;
  return data;
} catch (error) {
  const errorMessage = getErrorMessage(error);
  toast.error(errorMessage);
  throw error;
}
```
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [ ] API ì—”ë“œí¬ì¸íŠ¸ ì •ì˜
- [ ] ìš”ì²­/ì‘ë‹µ ìŠ¤í‚¤ë§ˆ ì‘ì„±
- [ ] ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹ ì •ì˜
- [ ] ì‹¤ì‹œê°„ êµ¬ë… ë°©ì‹ ì„¤ê³„

---

### ğŸ“‹ **TIER 3: ìš´ì˜ ë¬¸ì„œ (Phase 2-3 ì¤‘ ì‘ì„±)**

#### 3.1 ë°°í¬ ë° ì¸í”„ë¼ ë¬¸ì„œ
```markdown
# Moonwave ë°°í¬ ë° ì¸í”„ë¼ ê´€ë¦¬ ê°€ì´ë“œ

## ğŸš€ ë°°í¬ ì „ëµ

### GitHub Actions ì›Œí¬í”Œë¡œìš°
```yaml
# ë°°í¬ ì¡°ê±´
Trigger: main ë¸Œëœì¹˜ Push
Environment: Production Only
Build Time: ~3ë¶„
Deployment Time: ~2ë¶„
Total Time: ~5ë¶„
```

### ë°°í¬ ë‹¨ê³„
1. **Code Quality Check**: TypeScript, ESLint
2. **Build**: Vite ë¹Œë“œ í”„ë¡œì„¸ìŠ¤
3. **Test**: í™˜ê²½ ë³€ìˆ˜ ê²€ì¦, Supabase ì—°ê²° í…ŒìŠ¤íŠ¸
4. **Deploy**: GitHub Pages ìë™ ë°°í¬
5. **Verify**: ë°°í¬ í›„ Health Check

### ë¡¤ë°± ì „ëµ
- **ìë™ ë¡¤ë°±**: ë°°í¬ ì‹¤íŒ¨ ì‹œ ì´ì „ ë²„ì „ìœ¼ë¡œ ìë™ ë³µêµ¬
- **ìˆ˜ë™ ë¡¤ë°±**: GitHub Pages ì´ì „ ë°°í¬ ì„ íƒ

## ğŸ” í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬

### GitHub Secrets
```bash
VITE_SUPABASE_URL=https://project.supabase.co
VITE_SUPABASE_ANON_KEY=eyJ...
VITE_SITE_URL=https://project.moonwave.kr
CUSTOM_DOMAIN=project.moonwave.kr
```

### í™˜ê²½ë³„ ì„¤ì •
- **Production**: GitHub Secrets ê¸°ë°˜
- **Development**: GitHub Codespaces í™˜ê²½

## ğŸ“Š ëª¨ë‹ˆí„°ë§

### ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- **í˜ì´ì§€ ë¡œë“œ ì‹œê°„**: < 3ì´ˆ
- **LCP (Largest Contentful Paint)**: < 2.5ì´ˆ
- **ë²ˆë“¤ í¬ê¸°**: < 500KB

### ê°€ìš©ì„± ëª¨ë‹ˆí„°ë§
- **Uptime**: 99.9% ëª©í‘œ
- **Error Rate**: < 1%
- **Response Time**: < 1ì´ˆ
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [ ] ë°°í¬ íŒŒì´í”„ë¼ì¸ ì„¤ê³„
- [ ] í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬ ë°©ì‹ ì •ì˜
- [ ] ëª¨ë‹ˆí„°ë§ ì§€í‘œ ì„¤ì •
- [ ] ë°±ì—… ë° ë³µêµ¬ ê³„íš

---

#### 3.2 ë³´ì•ˆ ì •ì±… ë¬¸ì„œ
```markdown
# Moonwave ë³´ì•ˆ ì •ì±… ë° ê°€ì´ë“œë¼ì¸

## ğŸ” ë°ì´í„° ë³´ì•ˆ

### RLS (Row Level Security)
```sql
-- ëª¨ë“  í…Œì´ë¸”ì— RLS ì ìš©
ALTER TABLE profiles ENABLE ROW LEVEL SECURITY;
ALTER TABLE subscriptions ENABLE ROW LEVEL SECURITY;
ALTER TABLE payment_history ENABLE ROW LEVEL SECURITY;

-- ì‚¬ìš©ìë³„ ë°ì´í„° ê²©ë¦¬
CREATE POLICY "Users can only access own data" 
ON subscriptions FOR ALL 
USING (auth.uid() = user_id);
```

### ë°ì´í„° ë¶„ë¥˜
- **Public**: ì—†ìŒ
- **Internal**: ì‚¬ìš©ì í”„ë¡œí•„ (ì´ë¦„, ì´ë©”ì¼)
- **Confidential**: êµ¬ë… ì •ë³´, ê²°ì œ ë‚´ì—­
- **Restricted**: ì¸ì¦ í† í°, ì„¸ì…˜ ì •ë³´

## ğŸ›¡ ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆ

### ì…ë ¥ ê²€ì¦
- **í´ë¼ì´ì–¸íŠ¸**: TypeScript íƒ€ì… ê²€ì¦
- **ì„œë²„**: Supabase RLS + Database ì œì•½ì¡°ê±´
- **XSS ë°©ì§€**: Reactì˜ ê¸°ë³¸ ì´ìŠ¤ì¼€ì´í•‘

### ì¸ì¦ ë³´ì•ˆ
- **í† í°**: JWT ê¸°ë°˜, ìë™ ê°±ì‹ 
- **ì„¸ì…˜**: 7ì¼ ìë™ ë§Œë£Œ
- **ë¡œê·¸ì•„ì›ƒ**: í† í° ë¬´íš¨í™”

## ğŸ” ë³´ì•ˆ ê°ì‚¬

### ì •ê¸° ì ê²€ í•­ëª©
- [ ] RLS ì •ì±… ê²€í† 
- [ ] í™˜ê²½ ë³€ìˆ˜ ë³´ì•ˆ í™•ì¸
- [ ] ì˜ì¡´ì„± ì·¨ì•½ì  ìŠ¤ìº”
- [ ] ì ‘ê·¼ ë¡œê·¸ ë¶„ì„
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [ ] ë°ì´í„° ë³´ì•ˆ ì •ì±… ìˆ˜ë¦½
- [ ] ì ‘ê·¼ ì œì–´ ë°©ì‹ ì •ì˜
- [ ] ë³´ì•ˆ ê°ì‚¬ ì ˆì°¨ ë§ˆë ¨
- [ ] ì¸ì‹œë˜íŠ¸ ëŒ€ì‘ ê³„íš

---

### ğŸ¤ **TIER 4: í˜‘ì—… ë¬¸ì„œ (Phase 1-2 ì¤‘ ì‘ì„±)**

#### 4.1 ê°œë°œ ê°€ì´ë“œ ë¬¸ì„œ
```markdown
# Moonwave ê°œë°œ ê°€ì´ë“œ ë° ì»¨ë²¤ì…˜

## ğŸ’» ê°œë°œ í™˜ê²½ ì„¤ì •

### í•„ìˆ˜ ë„êµ¬
- **Editor**: Cursor AI (GitHub ì§ì ‘ ì—°ë™)
- **Node.js**: v20 ì´ìƒ
- **Package Manager**: npm
- **Browser**: Chrome (ê°œë°œì ë„êµ¬)

### í”„ë¡œì íŠ¸ ì„¤ì •
```bash
# Repository í´ë¡ 
git clone https://github.com/username/moonwave-subscription-manager
cd moonwave-subscription-manager

# ì˜ì¡´ì„± ì„¤ì¹˜
npm ci

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env.local
# GitHub Codespacesì—ì„œ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

# íƒ€ì… ì²´í¬
npm run type-check

# ë¹Œë“œ í…ŒìŠ¤íŠ¸
npm run build
```

## ğŸ“ ì½”ë”© ì»¨ë²¤ì…˜

### íŒŒì¼ ëª…ëª… ê·œì¹™
```typescript
// ì»´í¬ë„ŒíŠ¸: PascalCase
SubscriptionCard.tsx
UserProfile.tsx

// í›…: camelCase with 'use' prefix
useSubscriptions.ts
useUserProfile.ts

// ìœ í‹¸ë¦¬í‹°: camelCase
formatCurrency.ts
dateHelpers.ts

// íƒ€ì…: camelCase
subscriptionTypes.ts
commonTypes.ts
```

### ì»´í¬ë„ŒíŠ¸ ì‘ì„± í‘œì¤€
```typescript
// 1. Reactì™€ íƒ€ì… import
import React from 'react';
import { cn } from '@/lib/utils';
import { Database } from '@/types/supabase';

// 2. íƒ€ì… ì •ì˜
interface ComponentProps {
  // Props ì •ì˜
}

// 3. ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
export const Component: React.FC<ComponentProps> = ({
  // Props destructuring
}) => {
  // 4. ë¡œì§ êµ¬í˜„
  
  // 5. ë Œë”ë§ (Pretendard í°íŠ¸ í•„ìˆ˜)
  return (
    <div className="font-pretendard antialiased">
      {/* ì»´í¬ë„ŒíŠ¸ ë‚´ìš© */}
    </div>
  );
};
```

### CSS í´ë˜ìŠ¤ ìš°ì„ ìˆœìœ„
1. **Layout**: `flex`, `grid`, `@container`
2. **Spacing**: `p-4`, `m-6`, `gap-4`
3. **Typography**: `font-pretendard`, `text-lg`, `font-semibold`
4. **Colors**: `bg-white`, `text-gray-900`
5. **Effects**: `shadow-lg`, `hover:shadow-xl`
6. **Responsive**: `@lg:flex-row`, `@md:p-6`

## ğŸ”„ Git ì›Œí¬í”Œë¡œìš°

### ë¸Œëœì¹˜ ì „ëµ
```bash
main        # í”„ë¡œë•ì…˜ ë°°í¬
develop     # ê°œë°œ í†µí•©
feature/*   # ê¸°ëŠ¥ ê°œë°œ
hotfix/*    # ê¸´ê¸‰ ìˆ˜ì •
```

### ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹
```bash
# í˜•ì‹: type(scope): description

feat(subscription): êµ¬ë… ì¹´ë“œ ì»´í¬ë„ŒíŠ¸ ì¶”ê°€
fix(auth): ë¡œê·¸ì¸ ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ 
docs(readme): ì„¤ì¹˜ ê°€ì´ë“œ ì—…ë°ì´íŠ¸
style(button): Pretendard í°íŠ¸ ì ìš©
refactor(hooks): useSubscriptions í›… ìµœì í™”
test(api): Supabase ì—°ê²° í…ŒìŠ¤íŠ¸ ì¶”ê°€
```

### Pull Request ê°€ì´ë“œ
```markdown
## ë³€ê²½ ì‚¬í•­
- [ ] ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
- [ ] ë²„ê·¸ ìˆ˜ì •
- [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸
- [ ] ë¦¬íŒ©í† ë§

## ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] TypeScript ì»´íŒŒì¼ í†µê³¼
- [ ] ESLint ê²€ì‚¬ í†µê³¼
- [ ] ì‹¤ì œ ë°ì´í„° ì—°ë™ í™•ì¸
- [ ] ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ í™•ì¸
- [ ] Pretendard í°íŠ¸ ì ìš© í™•ì¸

## í…ŒìŠ¤íŠ¸
- [ ] ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- [ ] íšŒê·€ í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- [ ] í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ ì™„ë£Œ
```
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [ ] ê°œë°œ í™˜ê²½ ê°€ì´ë“œ ì‘ì„±
- [ ] ì½”ë”© ì»¨ë²¤ì…˜ ì •ì˜
- [ ] Git ì›Œí¬í”Œë¡œìš° ìˆ˜ë¦½
- [ ] ì½”ë“œ ë¦¬ë·° í”„ë¡œì„¸ìŠ¤ ì •ì˜

---

#### 4.2 ì´ìŠˆ ê´€ë¦¬ ë° í”„ë¡œì íŠ¸ ê³„íš ë¬¸ì„œ
```markdown
# Moonwave ì´ìŠˆ ê´€ë¦¬ ë° í”„ë¡œì íŠ¸ ê³„íš

## ğŸ“‹ ì´ìŠˆ ë¶„ë¥˜ ì²´ê³„

### ì´ìŠˆ íƒ€ì…
- **Epic**: ëŒ€ê·œëª¨ ê¸°ëŠ¥ ê°œë°œ (êµ¬ë… ê´€ë¦¬ ì‹œìŠ¤í…œ)
- **Story**: ì‚¬ìš©ì ìŠ¤í† ë¦¬ (êµ¬ë… ë“±ë¡ ê¸°ëŠ¥)
- **Task**: ê°œë°œ ì‘ì—… (API ì—°ë™)
- **Bug**: ë²„ê·¸ ìˆ˜ì • (ë°ì´í„° ë¡œë”© ì‹¤íŒ¨)
- **Spike**: ê¸°ìˆ  ì¡°ì‚¬ (ì„±ëŠ¥ ìµœì í™” ë°©ì•ˆ)

### ìš°ì„ ìˆœìœ„
- **P0 (Critical)**: ì‹œìŠ¤í…œ ì¥ì• , ë°ì´í„° ì†ì‹¤
- **P1 (High)**: í•µì‹¬ ê¸°ëŠ¥ ì¥ì• 
- **P2 (Medium)**: ì¼ë°˜ ê¸°ëŠ¥ ê°œì„ 
- **P3 (Low)**: í¸ì˜ì„± ê°œì„ 

### ìƒíƒœ ê´€ë¦¬
```
Backlog â†’ In Progress â†’ Review â†’ Testing â†’ Done
```

## ğŸ“Š ìŠ¤í”„ë¦°íŠ¸ ê³„íš

### Sprint 1 (2ì£¼): í”„ë¡œì íŠ¸ ê¸°ë°˜ êµ¬ì¶•
- [ ] GitHub Repository ì„¤ì •
- [ ] Supabase í”„ë¡œì íŠ¸ ìƒì„±
- [ ] ê¸°ë³¸ UI ì»´í¬ë„ŒíŠ¸ ê°œë°œ
- [ ] ë°°í¬ íŒŒì´í”„ë¼ì¸ êµ¬ì¶•

### Sprint 2 (2ì£¼): í•µì‹¬ ê¸°ëŠ¥ ê°œë°œ
- [ ] êµ¬ë… CRUD ê¸°ëŠ¥
- [ ] ëŒ€ì‹œë³´ë“œ í˜ì´ì§€
- [ ] ì‚¬ìš©ì ì¸ì¦ êµ¬í˜„
- [ ] ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™”

### Sprint 3 (2ì£¼): ê¸°ëŠ¥ ì™„ì„± ë° ìµœì í™”
- [ ] ê²°ì œ ì•Œë¦¼ ì‹œìŠ¤í…œ
- [ ] í†µê³„ ë° ë¶„ì„ ê¸°ëŠ¥
- [ ] ì„±ëŠ¥ ìµœì í™”
- [ ] ì‚¬ìš©ì í…ŒìŠ¤íŠ¸

## ğŸ¯ Definition of Done

### ê¸°ëŠ¥ ê°œë°œ ì™„ë£Œ ê¸°ì¤€
- [ ] ìš”êµ¬ì‚¬í•­ ì¶©ì¡±
- [ ] ì½”ë“œ ë¦¬ë·° ì™„ë£Œ
- [ ] TypeScript íƒ€ì… ì•ˆì „ì„± í™•ë³´
- [ ] ì‹¤ì œ ë°ì´í„° ì—°ë™ í™•ì¸
- [ ] ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ ì ìš©
- [ ] ì ‘ê·¼ì„± ê²€ì¦
- [ ] ë°°í¬ í™˜ê²½ í…ŒìŠ¤íŠ¸ ì™„ë£Œ

### ë²„ê·¸ ìˆ˜ì • ì™„ë£Œ ê¸°ì¤€
- [ ] ê·¼ë³¸ ì›ì¸ ë¶„ì„ ì™„ë£Œ
- [ ] ìˆ˜ì • ì‚¬í•­ êµ¬í˜„
- [ ] íšŒê·€ í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ê´€ë ¨ ë¬¸ì„œ ì—…ë°ì´íŠ¸
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [ ] ì´ìŠˆ íŠ¸ë˜í‚¹ ì‹œìŠ¤í…œ ì„¤ì •
- [ ] ìŠ¤í”„ë¦°íŠ¸ ê³„íš ìˆ˜ë¦½
- [ ] Definition of Done ì •ì˜
- [ ] í”„ë¡œì íŠ¸ ë¡œë“œë§µ ì‘ì„±

---

## ğŸ“Š ë¬¸ì„œ ì‘ì„± ìš°ì„ ìˆœìœ„ ë§¤íŠ¸ë¦­ìŠ¤

| ë¬¸ì„œ | ì¤‘ìš”ë„ | ê¸´ê¸‰ë„ | Phase 1 ì´ì „ | ì‘ì„± ì‹œê°„ |
|------|--------|--------|-------------|----------|
| **PRD** | â­â­â­â­â­ | â­â­â­â­â­ | í•„ìˆ˜ | 4-6ì‹œê°„ |
| **ê¸°ìˆ  ì•„í‚¤í…ì²˜** | â­â­â­â­â­ | â­â­â­â­â­ | í•„ìˆ˜ | 3-4ì‹œê°„ |
| **UI/UX ë””ìì¸ ì‹œìŠ¤í…œ** | â­â­â­â­ | â­â­â­â­ | ê¶Œì¥ | 2-3ì‹œê°„ |
| **API ëª…ì„¸ì„œ** | â­â­â­â­ | â­â­â­ | ê¶Œì¥ | 2-3ì‹œê°„ |
| **ê°œë°œ ê°€ì´ë“œ** | â­â­â­ | â­â­â­â­ | ê¶Œì¥ | 1-2ì‹œê°„ |
| **ë°°í¬ ë¬¸ì„œ** | â­â­â­ | â­â­ | ì„ íƒ | 1-2ì‹œê°„ |
| **ë³´ì•ˆ ì •ì±…** | â­â­â­â­ | â­â­ | ì„ íƒ | 1-2ì‹œê°„ |
| **ì´ìŠˆ ê´€ë¦¬** | â­â­ | â­â­â­ | ì„ íƒ | 1ì‹œê°„ |

## ğŸ¯ Phase 1 ì‹œì‘ ì „ ìµœì†Œ ìš”êµ¬ì‚¬í•­

### ğŸ”´ **ë°˜ë“œì‹œ ì‘ì„±í•´ì•¼ í•  ë¬¸ì„œ (MUST)**
1. **PRD (Product Requirements Document)** - ì œí’ˆ ë¹„ì „ê³¼ ìš”êµ¬ì‚¬í•­ ëª…í™•í™”
2. **ê¸°ìˆ  ì•„í‚¤í…ì²˜ ë¬¸ì„œ** - ê¸°ìˆ  ìŠ¤íƒê³¼ ì‹œìŠ¤í…œ ì„¤ê³„ í™•ì •

### ğŸŸ¡ **ê¶Œì¥ ì‘ì„± ë¬¸ì„œ (SHOULD)**
3. **UI/UX ë””ìì¸ ì‹œìŠ¤í…œ** - ì¼ê´€ëœ ì‚¬ìš©ì ê²½í—˜ ì„¤ê³„
4. **API ëª…ì„¸ì„œ** - ë°ì´í„° íë¦„ê³¼ ì¸í„°í˜ì´ìŠ¤ ì •ì˜
5. **ê°œë°œ ê°€ì´ë“œ** - íŒ€ í˜‘ì—…ê³¼ ì½”ë“œ í’ˆì§ˆ í™•ë³´

### ğŸŸ¢ **ì„ íƒ ì‘ì„± ë¬¸ì„œ (COULD)**
6. **ë°°í¬ ë° ì¸í”„ë¼ ë¬¸ì„œ** - ìš´ì˜ ê³„íš ìˆ˜ë¦½
7. **ë³´ì•ˆ ì •ì±… ë¬¸ì„œ** - ë°ì´í„° ë³´í˜¸ ë°©ì•ˆ ë§ˆë ¨
8. **ì´ìŠˆ ê´€ë¦¬ ë¬¸ì„œ** - í”„ë¡œì íŠ¸ ì§„í–‰ ê´€ë¦¬

---

**ğŸ’¡ ë¬¸ì„œ ì‘ì„± ê°€ì´ë“œë¼ì¸**

1. **ì‹¤ì œ íë¦„ ì¤‘ì‹¬**: "ê°€ì§œ íë¦„ì´ ì•„ë‹Œ, ì‹¤ì œ íë¦„ìœ¼ë¡œ ì„¤ê³„"í•˜ëŠ” Moonwave ì² í•™ ë°˜ì˜
2. **êµ¬ì²´ì  ëª…ì‹œ**: localhost ê¸ˆì§€, Mock ë°ì´í„° ê¸ˆì§€ ë“± ì œì•½ì‚¬í•­ ëª…í™•íˆ ê¸°ìˆ 
3. **ì‹¤í–‰ ê°€ëŠ¥ì„±**: AI Agentë‚˜ ê°œë°œìê°€ ë°”ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆì„ ì •ë„ë¡œ êµ¬ì²´ì  ì‘ì„±
4. **ì§€ì†ì  ì—…ë°ì´íŠ¸**: í”„ë¡œì íŠ¸ ì§„í–‰ì— ë”°ë¼ ë¬¸ì„œ ì§€ì†ì  ê°œì„ 
5. **ë²„ì „ ê´€ë¦¬**: ë¬¸ì„œ ë³€ê²½ì‚¬í•­ì„ Gitìœ¼ë¡œ ì¶”ì  ê´€ë¦¬

ì´ ë¬¸ì„œë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ Phase 1 í”„ë¡œì íŠ¸ ì´ˆê¸°í™”ë¥¼ ì‹œì‘í•˜ë©´, ëª…í™•í•œ ë°©í–¥ì„±ê³¼ ì¼ê´€ëœ ê°œë°œ íë¦„ì„ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
