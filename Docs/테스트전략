## ìš”ì•½
Moonwave Travelì˜ í…ŒìŠ¤íŠ¸ ì „ëµ ë¬¸ì„œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. "ê°€ì§œ íë¦„ì´ ì•„ë‹Œ, ì‹¤ì œ íë¦„"ì˜ ì›ì¹™ì— ë”°ë¼ Mock ë°ì´í„°ë¥¼ ìµœì†Œí™”í•˜ê³  ì‹¤ì œ Supabase í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ í™œìš©í•˜ëŠ” ì „ëµì„ ìˆ˜ë¦½í•©ë‹ˆë‹¤.

## ë¶„ì„
í…ŒìŠ¤íŠ¸ ì „ëµì˜ í•µì‹¬ ê³¼ì œ:
- **Mock ê¸ˆì§€ ì›ì¹™**: ì‹¤ì œ Supabase í…ŒìŠ¤íŠ¸ DB ì‚¬ìš©
- **Next.js Static Export**: ì„œë²„ ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ ê³ ë ¤
- **ì‹¤ì‹œê°„ ë™ê¸°í™”**: WebSocket ê¸°ë°˜ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- **UI íŠ¹í™” ìš”ì†Œ**: Container Queries, Pretendard í°íŠ¸

## ì‹¤í–‰

# Moonwave Travel í…ŒìŠ¤íŠ¸ ì „ëµ ë¬¸ì„œ v1.0

> "ê°€ì§œ íë¦„ì´ ì•„ë‹Œ, ì‹¤ì œ íë¦„ìœ¼ë¡œ ì„¤ê³„í•œë‹¤" - ì‹¤ì œ ë°ì´í„° ê¸°ë°˜ í…ŒìŠ¤íŠ¸ ì „ëµ

## ğŸ“‹ ëª©ì°¨
1. [í…ŒìŠ¤íŠ¸ ì² í•™ ë° ì›ì¹™](#1-í…ŒìŠ¤íŠ¸-ì² í•™-ë°-ì›ì¹™)
2. [í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •](#2-í…ŒìŠ¤íŠ¸-í™˜ê²½-ì„¤ì •)
3. [ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì „ëµ](#3-ë‹¨ìœ„-í…ŒìŠ¤íŠ¸-ì „ëµ)
4. [í†µí•© í…ŒìŠ¤íŠ¸ ì „ëµ](#4-í†µí•©-í…ŒìŠ¤íŠ¸-ì „ëµ)
5. [E2E í…ŒìŠ¤íŠ¸ ì „ëµ](#5-e2e-í…ŒìŠ¤íŠ¸-ì „ëµ)
6. [ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸](#6-ì‹œê°ì -íšŒê·€-í…ŒìŠ¤íŠ¸)
7. [ì„±ëŠ¥ í…ŒìŠ¤íŠ¸](#7-ì„±ëŠ¥-í…ŒìŠ¤íŠ¸)
8. [í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ëª©í‘œ](#8-í…ŒìŠ¤íŠ¸-ì»¤ë²„ë¦¬ì§€-ëª©í‘œ)

---

## 1. í…ŒìŠ¤íŠ¸ ì² í•™ ë° ì›ì¹™

### 1.1 Moonwave í…ŒìŠ¤íŠ¸ ì›ì¹™

```typescript
const MOONWAVE_TEST_PRINCIPLES = {
  // ì‹¤ì œ ë°ì´í„° ì›ì¹™
  realDataFirst: "Mock ëŒ€ì‹  Supabase í…ŒìŠ¤íŠ¸ í™˜ê²½ ì‚¬ìš©",
  
  // ì‚¬ìš©ì ì¤‘ì‹¬ í…ŒìŠ¤íŠ¸
  userCentric: "ì‹¤ì œ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ í…ŒìŠ¤íŠ¸",
  
  // ì‹œê°ì  í’ˆì§ˆ
  visualQuality: "Pretendard í°íŠ¸, Container Queries ê²€ì¦",
  
  // ì‹¤ì‹œê°„ ê²€ì¦
  realtimeValidation: "WebSocket ê¸°ë°˜ ë™ê¸°í™” í…ŒìŠ¤íŠ¸"
} as const;
```

### 1.2 í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ

```
         E2E (10%)
      /            \
    í†µí•© í…ŒìŠ¤íŠ¸ (30%)
   /                \
 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (60%)
```

---

## 2. í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •

### 2.1 Supabase í…ŒìŠ¤íŠ¸ í™˜ê²½

```typescript
// test/setup/supabase-test.ts
import { createClient } from '@supabase/supabase-js';

// í…ŒìŠ¤íŠ¸ ì „ìš© Supabase í”„ë¡œì íŠ¸ ì‚¬ìš©
const supabaseTest = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_TEST_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_TEST_ANON_KEY!
);

// í…ŒìŠ¤íŠ¸ ë°ì´í„° ì´ˆê¸°í™”
export async function setupTestDatabase() {
  // í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ìƒì„±
  const { data: { user } } = await supabaseTest.auth.signUp({
    email: 'test@moonwave.kr',
    password: 'test-password-123'
  });

  // í…ŒìŠ¤íŠ¸ ì—¬í–‰ ë°ì´í„°
  const testTravel = {
    user_id: user!.id,
    title: 'ì œì£¼ë„ í…ŒìŠ¤íŠ¸ ì—¬í–‰',
    destination: 'ì œì£¼ë„',
    start_date: '2025-08-15',
    end_date: '2025-08-20',
    status: 'planning'
  };

  const { data: travel } = await supabaseTest
    .from('travel_plans')
    .insert(testTravel)
    .select()
    .single();

  return { user, travel };
}

// í…ŒìŠ¤íŠ¸ í›„ ì •ë¦¬
export async function cleanupTestDatabase(userId: string) {
  // CASCADE DELETEë¡œ ê´€ë ¨ ë°ì´í„° ëª¨ë‘ ì‚­ì œ
  await supabaseTest
    .from('profiles')
    .delete()
    .eq('id', userId);
}
```

### 2.2 í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì • íŒŒì¼

```javascript
// jest.config.js
module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'jsdom',
  setupFilesAfterEnv: ['<rootDir>/test/setup/jest.setup.ts'],
  moduleNameMapper: {
    '^@/(.*)$': '<rootDir>/src/$1',
    '^@/components/(.*)$': '<rootDir>/components/$1',
  },
  transform: {
    '^.+\\.(ts|tsx)$': ['ts-jest', {
      tsconfig: {
        jsx: 'react'
      }
    }]
  },
  testPathIgnorePatterns: ['/node_modules/', '/.next/'],
  collectCoverageFrom: [
    'components/**/*.{ts,tsx}',
    'hooks/**/*.{ts,tsx}',
    'lib/**/*.{ts,tsx}',
    '!**/*.d.ts',
    '!**/node_modules/**',
  ]
};
```

```typescript
// test/setup/jest.setup.ts
import '@testing-library/jest-dom';
import { loadEnvConfig } from '@next/env';

// í…ŒìŠ¤íŠ¸ í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ
loadEnvConfig(process.cwd());

// Container Queries í´ë¦¬í•„
global.ResizeObserver = jest.fn().mockImplementation(() => ({
  observe: jest.fn(),
  unobserve: jest.fn(),
  disconnect: jest.fn(),
}));

// Pretendard í°íŠ¸ ëª¨í‚¹
jest.mock('next/font/local', () => ({
  default: () => ({
    className: 'font-pretendard',
    variable: '--font-pretendard'
  })
}));
```

---

## 3. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì „ëµ

### 3.1 ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸

```typescript
// components/features/travel/__tests__/TravelCard.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { TravelCard } from '../TravelCard';
import { mockTravel } from '@/test/fixtures/travel';

describe('TravelCard', () => {
  it('ì—¬í–‰ ì •ë³´ê°€ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œë˜ì–´ì•¼ í•¨', () => {
    render(<TravelCard travel={mockTravel} />);
    
    expect(screen.getByText('ì œì£¼ë„ ì—¬í–‰')).toBeInTheDocument();
    expect(screen.getByText('ì œì£¼ë„')).toBeInTheDocument();
    expect(screen.getByText('2025ë…„ 8ì›” 15ì¼ - 8ì›” 20ì¼')).toBeInTheDocument();
  });

  it('Pretendard í°íŠ¸ í´ë˜ìŠ¤ê°€ ì ìš©ë˜ì–´ì•¼ í•¨', () => {
    const { container } = render(<TravelCard travel={mockTravel} />);
    
    expect(container.firstChild).toHaveClass('font-pretendard');
    expect(container.querySelector('.tracking-korean-tight')).toBeInTheDocument();
  });

  it('Container Query í´ë˜ìŠ¤ê°€ ì ìš©ë˜ì–´ì•¼ í•¨', () => {
    const { container } = render(<TravelCard travel={mockTravel} />);
    
    expect(container.firstChild).toHaveClass('@container/travel-card');
    expect(container.querySelector('.@lg/travel-card\\:flex-row')).toBeInTheDocument();
  });

  it('í´ë¦­ ì‹œ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•´ì•¼ í•¨', () => {
    const onClickMock = jest.fn();
    render(<TravelCard travel={mockTravel} onClick={onClickMock} />);
    
    fireEvent.click(screen.getByRole('article'));
    expect(onClickMock).toHaveBeenCalledWith(mockTravel.id);
  });
});
```

### 3.2 ì»¤ìŠ¤í…€ í›… í…ŒìŠ¤íŠ¸

```typescript
// hooks/__tests__/useTravelPlans.test.tsx
import { renderHook, waitFor } from '@testing-library/react';
import { useTravelPlans } from '../useTravelPlans';
import { SupabaseProvider } from '@/components/providers/SupabaseProvider';
import { setupTestDatabase, cleanupTestDatabase } from '@/test/setup/supabase-test';

describe('useTravelPlans', () => {
  let testUser: any;
  let testTravel: any;

  beforeEach(async () => {
    const setup = await setupTestDatabase();
    testUser = setup.user;
    testTravel = setup.travel;
  });

  afterEach(async () => {
    await cleanupTestDatabase(testUser.id);
  });

  it('ì‹¤ì œ Supabase ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•¨', async () => {
    const wrapper = ({ children }: { children: React.ReactNode }) => (
      <SupabaseProvider>{children}</SupabaseProvider>
    );

    const { result } = renderHook(() => useTravelPlans(), { wrapper });

    // ë¡œë”© ìƒíƒœ
    expect(result.current.loading).toBe(true);

    // ë°ì´í„° ë¡œë“œ ëŒ€ê¸°
    await waitFor(() => {
      expect(result.current.loading).toBe(false);
    });

    // ì‹¤ì œ ë°ì´í„° ê²€ì¦
    expect(result.current.travelPlans).toHaveLength(1);
    expect(result.current.travelPlans[0].title).toBe('ì œì£¼ë„ í…ŒìŠ¤íŠ¸ ì—¬í–‰');
  });

  it('ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ë¥¼ ìˆ˜ì‹ í•´ì•¼ í•¨', async () => {
    const wrapper = ({ children }: { children: React.ReactNode }) => (
      <SupabaseProvider>{children}</SupabaseProvider>
    );

    const { result } = renderHook(() => useTravelPlans(), { wrapper });

    await waitFor(() => {
      expect(result.current.loading).toBe(false);
    });

    // ìƒˆ ì—¬í–‰ ì¶”ê°€
    await supabaseTest
      .from('travel_plans')
      .insert({
        user_id: testUser.id,
        title: 'ë¶€ì‚° í…ŒìŠ¤íŠ¸ ì—¬í–‰',
        destination: 'ë¶€ì‚°',
        start_date: '2025-09-01',
        end_date: '2025-09-03'
      });

    // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ëŒ€ê¸°
    await waitFor(() => {
      expect(result.current.travelPlans).toHaveLength(2);
    });
  });
});
```

### 3.3 ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ í…ŒìŠ¤íŠ¸

```typescript
// lib/utils/__tests__/formatters.test.ts
import { formatDate, formatCurrency, formatDuration } from '../formatters';

describe('formatters', () => {
  describe('formatDate', () => {
    it('í•œêµ­ì–´ ë‚ ì§œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•´ì•¼ í•¨', () => {
      expect(formatDate('2025-08-15')).toBe('2025ë…„ 8ì›” 15ì¼');
      expect(formatDate('2025-12-25')).toBe('2025ë…„ 12ì›” 25ì¼');
    });
  });

  describe('formatCurrency', () => {
    it('í•œêµ­ ì›í™” í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•´ì•¼ í•¨', () => {
      expect(formatCurrency(50000, 'KRW')).toBe('â‚©50,000');
      expect(formatCurrency(1234567, 'KRW')).toBe('â‚©1,234,567');
    });

    it('ë‹¬ëŸ¬ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•´ì•¼ í•¨', () => {
      expect(formatCurrency(99.99, 'USD')).toBe('$99.99');
    });
  });
});
```

---

## 4. í†µí•© í…ŒìŠ¤íŠ¸ ì „ëµ

### 4.1 API í†µí•© í…ŒìŠ¤íŠ¸

```typescript
// __tests__/integration/travel-api.test.ts
import { createClient } from '@supabase/supabase-js';
import { setupTestDatabase, cleanupTestDatabase } from '@/test/setup/supabase-test';

describe('Travel API Integration', () => {
  let supabase: any;
  let testUser: any;

  beforeAll(async () => {
    supabase = createClient(
      process.env.NEXT_PUBLIC_SUPABASE_TEST_URL!,
      process.env.NEXT_PUBLIC_SUPABASE_TEST_ANON_KEY!
    );
    
    const setup = await setupTestDatabase();
    testUser = setup.user;
  });

  afterAll(async () => {
    await cleanupTestDatabase(testUser.id);
  });

  describe('ì—¬í–‰ CRUD í”Œë¡œìš°', () => {
    it('ì—¬í–‰ ìƒì„± â†’ ì¡°íšŒ â†’ ìˆ˜ì • â†’ ì‚­ì œ ì „ì²´ í”Œë¡œìš°ê°€ ì‘ë™í•´ì•¼ í•¨', async () => {
      // 1. ìƒì„±
      const { data: created, error: createError } = await supabase
        .from('travel_plans')
        .insert({
          user_id: testUser.id,
          title: 'í†µí•© í…ŒìŠ¤íŠ¸ ì—¬í–‰',
          destination: 'ì„œìš¸',
          start_date: '2025-10-01',
          end_date: '2025-10-05'
        })
        .select()
        .single();

      expect(createError).toBeNull();
      expect(created.title).toBe('í†µí•© í…ŒìŠ¤íŠ¸ ì—¬í–‰');

      // 2. ì¡°íšŒ
      const { data: fetched } = await supabase
        .from('travel_plans')
        .select('*')
        .eq('id', created.id)
        .single();

      expect(fetched.title).toBe('í†µí•© í…ŒìŠ¤íŠ¸ ì—¬í–‰');

      // 3. ìˆ˜ì •
      const { data: updated } = await supabase
        .from('travel_plans')
        .update({ title: 'ìˆ˜ì •ëœ ì—¬í–‰' })
        .eq('id', created.id)
        .select()
        .single();

      expect(updated.title).toBe('ìˆ˜ì •ëœ ì—¬í–‰');

      // 4. ì‚­ì œ
      const { error: deleteError } = await supabase
        .from('travel_plans')
        .delete()
        .eq('id', created.id);

      expect(deleteError).toBeNull();
    });
  });

  describe('Dayë³„ ê³„íš í†µí•©', () => {
    it('ì—¬í–‰ ìƒì„± ì‹œ Dayê°€ ìë™ ìƒì„±ë˜ì–´ì•¼ í•¨', async () => {
      const { data: travel } = await supabase
        .from('travel_plans')
        .insert({
          user_id: testUser.id,
          title: 'Day í…ŒìŠ¤íŠ¸ ì—¬í–‰',
          destination: 'ì œì£¼ë„',
          start_date: '2025-08-15',
          end_date: '2025-08-17'
        })
        .select()
        .single();

      // Day ìë™ ìƒì„± ë¡œì§ ì‹¤í–‰
      const days = [];
      for (let i = 0; i < 3; i++) {
        const date = new Date('2025-08-15');
        date.setDate(date.getDate() + i);
        
        days.push({
          travel_plan_id: travel.id,
          day_number: i + 1,
          date: date.toISOString().split('T')[0]
        });
      }

      await supabase.from('travel_days').insert(days);

      // í™•ì¸
      const { data: createdDays } = await supabase
        .from('travel_days')
        .select('*')
        .eq('travel_plan_id', travel.id)
        .order('day_number');

      expect(createdDays).toHaveLength(3);
      expect(createdDays[0].day_number).toBe(1);
      expect(createdDays[2].date).toBe('2025-08-17');
    });
  });
});
```

### 4.2 Google Maps í†µí•© í…ŒìŠ¤íŠ¸

```typescript
// __tests__/integration/google-maps.test.ts
import { Loader } from '@googlemaps/js-api-loader';
import { PlaceSearchComponent } from '@/components/features/maps/PlaceSearch';
import { render, screen, waitFor, fireEvent } from '@testing-library/react';

describe('Google Maps Integration', () => {
  let google: any;

  beforeAll(async () => {
    const loader = new Loader({
      apiKey: process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY!,
      version: "weekly",
      libraries: ["places"]
    });
    
    google = await loader.load();
  });

  it('ì¥ì†Œ ê²€ìƒ‰ì´ ì‘ë™í•´ì•¼ í•¨', async () => {
    const onPlaceSelect = jest.fn();
    
    render(
      <PlaceSearchComponent 
        onPlaceSelect={onPlaceSelect}
        defaultValue=""
      />
    );

    const input = screen.getByPlaceholderText('ì¥ì†Œ ê²€ìƒ‰');
    
    // ì…ë ¥
    fireEvent.change(input, { target: { value: 'ì œì£¼ ê³µí•­' } });

    // ìë™ì™„ì„± ê²°ê³¼ ëŒ€ê¸°
    await waitFor(() => {
      expect(screen.getByText(/ì œì£¼êµ­ì œê³µí•­/)).toBeInTheDocument();
    }, { timeout: 5000 });

    // ì„ íƒ
    fireEvent.click(screen.getByText(/ì œì£¼êµ­ì œê³µí•­/));

    expect(onPlaceSelect).toHaveBeenCalledWith(
      expect.objectContaining({
        name: expect.stringContaining('ì œì£¼'),
        place_id: expect.any(String),
        geometry: expect.any(Object)
      })
    );
  });
});
```

---

## 5. E2E í…ŒìŠ¤íŠ¸ ì „ëµ

### 5.1 Playwright ì„¤ì •

```typescript
// playwright.config.ts
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './e2e',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: 'html',
  
  use: {
    baseURL: 'http://localhost:3000',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
    video: 'retain-on-failure',
  },

  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] },
    },
    {
      name: 'Mobile Chrome',
      use: { ...devices['Pixel 5'] },
    },
    {
      name: 'Mobile Safari',
      use: { ...devices['iPhone 12'] },
    },
  ],

  webServer: {
    command: 'npm run build && npm run start',
    port: 3000,
    reuseExistingServer: !process.env.CI,
  },
});
```

### 5.2 E2E í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

```typescript
// e2e/travel-planning-flow.spec.ts
import { test, expect } from '@playwright/test';
import { setupE2EUser, cleanupE2EUser } from './helpers/auth';

test.describe('ì—¬í–‰ ê³„íš ì „ì²´ í”Œë¡œìš°', () => {
  let testUser: any;

  test.beforeEach(async ({ page }) => {
    testUser = await setupE2EUser();
    await page.goto('/');
    
    // ë¡œê·¸ì¸
    await page.fill('[data-testid=email-input]', testUser.email);
    await page.fill('[data-testid=password-input]', testUser.password);
    await page.click('[data-testid=login-button]');
    
    await page.waitForURL('/travels');
  });

  test.afterEach(async () => {
    await cleanupE2EUser(testUser.id);
  });

  test('ì—¬í–‰ ìƒì„±ë¶€í„° ê³„íš ì¶”ê°€ê¹Œì§€ ì „ì²´ í”Œë¡œìš°', async ({ page }) => {
    // 1. ì—¬í–‰ ìƒì„±
    await page.click('[data-testid=create-travel-button]');
    
    await page.fill('[data-testid=travel-title]', 'ì œì£¼ë„ ê°€ì¡± ì—¬í–‰');
    await page.fill('[data-testid=destination]', 'ì œì£¼ë„');
    await page.fill('[data-testid=start-date]', '2025-08-15');
    await page.fill('[data-testid=end-date]', '2025-08-20');
    
    await page.click('[data-testid=save-travel-button]');
    
    // ì—¬í–‰ ëª©ë¡ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    await expect(page).toHaveURL('/travels');
    await expect(page.locator('text=ì œì£¼ë„ ê°€ì¡± ì—¬í–‰')).toBeVisible();
    
    // 2. ì—¬í–‰ ìƒì„¸ ì§„ì…
    await page.click('text=ì œì£¼ë„ ê°€ì¡± ì—¬í–‰');
    await expect(page).toHaveURL(/\/travels\/.+/);
    
    // Day íƒ­ í™•ì¸
    await expect(page.locator('text=Day 1')).toBeVisible();
    await expect(page.locator('text=Day 6')).toBeVisible();
    
    // 3. Day 1ì— ê³„íš ì¶”ê°€
    await page.click('text=Day 1');
    await page.click('[data-testid=add-plan-button]');
    
    // ì¥ì†Œ ê²€ìƒ‰ (Google Places)
    await page.fill('[data-testid=place-search]', 'ì„±ì‚°ì¼ì¶œë´‰');
    await page.waitForSelector('.pac-item', { timeout: 5000 });
    await page.click('.pac-item >> nth=0');
    
    // ê³„íš ìƒì„¸ ì…ë ¥
    await page.fill('[data-testid=planned-time]', '09:00');
    await page.fill('[data-testid=duration]', '120');
    await page.selectOption('[data-testid=plan-type]', 'sightseeing');
    await page.fill('[data-testid=notes]', 'ì¼ì¶œ ë³´ê¸°');
    
    await page.click('[data-testid=save-plan-button]');
    
    // ê³„íš ì¶”ê°€ í™•ì¸
    await expect(page.locator('text=ì„±ì‚°ì¼ì¶œë´‰')).toBeVisible();
    await expect(page.locator('text=09:00')).toBeVisible();
  });

  test('ì‹¤ì‹œê°„ í˜‘ì—… ì‹œë‚˜ë¦¬ì˜¤', async ({ page, context }) => {
    // ì²« ë²ˆì§¸ ì‚¬ìš©ì
    const travel = await createTestTravel(testUser.id);
    await page.goto(`/travels/${travel.id}`);
    
    // ë‘ ë²ˆì§¸ ë¸Œë¼ìš°ì € ì»¨í…ìŠ¤íŠ¸ (ë‹¤ë¥¸ ì‚¬ìš©ì)
    const page2 = await context.newPage();
    await page2.goto(`/travels/${travel.id}`);
    
    // ì²« ë²ˆì§¸ ì‚¬ìš©ìê°€ ê³„íš ì¶”ê°€
    await page.click('[data-testid=add-plan-button]');
    await page.fill('[data-testid=place-search]', 'í•œë¼ì‚°');
    // ... ê³„íš ì €ì¥
    
    // ë‘ ë²ˆì§¸ ì‚¬ìš©ìì—ê²Œ ì‹¤ì‹œê°„ ë°˜ì˜ í™•ì¸
    await expect(page2.locator('text=í•œë¼ì‚°')).toBeVisible({ timeout: 5000 });
  });
});
```

### 5.3 ëª¨ë°”ì¼ E2E í…ŒìŠ¤íŠ¸

```typescript
// e2e/mobile-experience.spec.ts
import { test, expect, devices } from '@playwright/test';

test.use({
  ...devices['iPhone 13'],
});

test.describe('ëª¨ë°”ì¼ ì‚¬ìš©ì ê²½í—˜', () => {
  test('ëª¨ë°”ì¼ì—ì„œ Container Queriesê°€ ì‘ë™í•´ì•¼ í•¨', async ({ page }) => {
    await page.goto('/travels');
    
    // ëª¨ë°”ì¼ ë·°í¬íŠ¸ì—ì„œ ì¹´ë“œ ë ˆì´ì•„ì›ƒ í™•ì¸
    const travelCard = page.locator('[data-testid=travel-card]').first();
    
    // ì„¸ë¡œ ë ˆì´ì•„ì›ƒ í™•ì¸
    await expect(travelCard.locator('.@lg/travel-card\\:flex-row')).toHaveCSS('flex-direction', 'column');
    
    // í„°ì¹˜ ì¸í„°ë™ì…˜
    await travelCard.tap();
    await expect(page).toHaveURL(/\/travels\/.+/);
  });

  test('ëª¨ë°”ì¼ ì§€ë„ ì¸í„°í˜ì´ìŠ¤', async ({ page }) => {
    await page.goto('/map');
    
    // BottomSheet í™•ì¸
    const bottomSheet = page.locator('[data-testid=bottom-sheet]');
    await expect(bottomSheet).toBeVisible();
    
    // ìŠ¤ì™€ì´í”„ ì œìŠ¤ì²˜
    await bottomSheet.dragTo(bottomSheet, {
      sourcePosition: { x: 150, y: 50 },
      targetPosition: { x: 150, y: 300 }
    });
    
    // í™•ì¥ëœ ìƒíƒœ í™•ì¸
    await expect(bottomSheet).toHaveCSS('height', /[4-9]\d{2}px/);
  });
});
```

---

## 6. ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸

### 6.1 Percy ì„¤ì •

```typescript
// percy.config.js
module.exports = {
  version: 2,
  snapshot: {
    widths: [375, 768, 1280, 1920],
    minHeight: 1024,
    percyCSS: `
      /* Pretendard í°íŠ¸ ë¡œë”© ëŒ€ê¸° */
      @font-face {
        font-family: 'Pretendard Variable';
        src: url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.woff2');
      }
    `
  },
  discovery: {
    allowedHostnames: ['localhost', 'cdn.jsdelivr.net', 'maps.googleapis.com']
  }
};
```

### 6.2 ì‹œê°ì  í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

```typescript
// e2e/visual-regression.spec.ts
import { test } from '@playwright/test';
import percySnapshot from '@percy/playwright';

test.describe('ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸', () => {
  test('ì—¬í–‰ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸', async ({ page }) => {
    await page.goto('/travels');
    
    // Pretendard í°íŠ¸ ë¡œë”© ëŒ€ê¸°
    await page.waitForLoadState('networkidle');
    await page.waitForTimeout(1000); // í°íŠ¸ ë Œë”ë§ ëŒ€ê¸°
    
    await percySnapshot(page, 'ì—¬í–‰ ëª©ë¡ - ë°ìŠ¤í¬í†±');
    
    // ëª¨ë°”ì¼ ë·°í¬íŠ¸
    await page.setViewportSize({ width: 375, height: 667 });
    await percySnapshot(page, 'ì—¬í–‰ ëª©ë¡ - ëª¨ë°”ì¼');
  });

  test('Container Queries ë°˜ì‘í˜•', async ({ page }) => {
    await page.goto('/travels/test-travel-id');
    
    const viewports = [
      { width: 320, height: 568, name: 'iPhone SE' },
      { width: 768, height: 1024, name: 'iPad' },
      { width: 1920, height: 1080, name: 'Desktop' }
    ];
    
    for (const viewport of viewports) {
      await page.setViewportSize(viewport);
      await page.waitForTimeout(500);
      await percySnapshot(page, `ì—¬í–‰ ìƒì„¸ - ${viewport.name}`);
    }
  });
});
```

---

## 7. ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

### 7.1 Lighthouse CI ì„¤ì •

```javascript
// lighthouserc.js
module.exports = {
  ci: {
    collect: {
      url: [
        'https://travel.moonwave.kr/',
        'https://travel.moonwave.kr/travels',
        'https://travel.moonwave.kr/map'
      ],
      numberOfRuns: 3,
      settings: {
        preset: 'desktop',
        throttling: {
          cpuSlowdownMultiplier: 1
        }
      }
    },
    assert: {
      assertions: {
        'categories:performance': ['error', { minScore: 0.9 }],
        'categories:accessibility': ['error', { minScore: 0.95 }],
        'categories:seo': ['error', { minScore: 0.95 }],
        'first-contentful-paint': ['error', { maxNumericValue: 2000 }],
        'largest-contentful-paint': ['error', { maxNumericValue: 2500 }],
        'cumulative-layout-shift': ['error', { maxNumericValue: 0.1 }],
        'total-blocking-time': ['error', { maxNumericValue: 300 }]
      }
    },
    upload: {
      target: 'temporary-public-storage'
    }
  }
};
```

### 7.2 ë²ˆë“¤ ì‚¬ì´ì¦ˆ í…ŒìŠ¤íŠ¸

```typescript
// scripts/bundle-size-test.ts
import { readFileSync } from 'fs';
import { join } from 'path';

const MAX_BUNDLE_SIZE = 500 * 1024; // 500KB
const buildDir = join(process.cwd(), '.next/static/chunks');

function checkBundleSize() {
  const pages = readFileSync(join(buildDir, 'pages/_app.js'));
  const framework = readFileSync(join(buildDir, 'framework.js'));
  
  const totalSize = pages.length + framework.length;
  
  if (totalSize > MAX_BUNDLE_SIZE) {
    console.error(`âŒ ë²ˆë“¤ í¬ê¸° ì´ˆê³¼: ${(totalSize / 1024).toFixed(2)}KB / ${MAX_BUNDLE_SIZE / 1024}KB`);
    process.exit(1);
  }
  
  console.log(`âœ… ë²ˆë“¤ í¬ê¸°: ${(totalSize / 1024).toFixed(2)}KB`);
}

checkBundleSize();
```

---

## 8. í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ëª©í‘œ

### 8.1 ì»¤ë²„ë¦¬ì§€ ëª©í‘œ

| ì¹´í…Œê³ ë¦¬ | ëª©í‘œ | í˜„ì¬ | ìƒíƒœ |
|----------|------|------|------|
| **í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§** | 90% | - | ğŸ”´ |
| **UI ì»´í¬ë„ŒíŠ¸** | 70% | - | ğŸ”´ |
| **ì»¤ìŠ¤í…€ í›…** | 85% | - | ğŸ”´ |
| **ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜** | 95% | - | ğŸ”´ |
| **í†µí•© í…ŒìŠ¤íŠ¸** | 80% | - | ğŸ”´ |

### 8.2 ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ ì„¤ì •

```json
// package.json
{
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "test:e2e": "playwright test",
    "test:e2e:ui": "playwright test --ui",
    "test:visual": "percy exec -- npm run test:e2e",
    "test:all": "npm run test:coverage && npm run test:e2e"
  }
}
```

---

## âœ… í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê°œë°œ ì¤‘ í…ŒìŠ¤íŠ¸
- [ ] ì»´í¬ë„ŒíŠ¸ ì‘ì„± ì‹œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë™ì‹œ ì‘ì„±
- [ ] ì»¤ìŠ¤í…€ í›… ì‘ì„± ì‹œ í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] PR ì „ `npm run test:all` ì‹¤í–‰

### PR ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ì»¤ë²„ë¦¬ì§€ ëª©í‘œ ë‹¬ì„±
- [ ] E2E í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸ í™•ì¸

### ë°°í¬ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ì „ì²´ í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ ì‹¤í–‰
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ì‹¤ì œ Supabase í”„ë¡œë•ì…˜ ì—°ê²° í…ŒìŠ¤íŠ¸
- [ ] í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ ì™„ë£Œ

---

**Moonwave Travel í…ŒìŠ¤íŠ¸ ì „ëµ v1.0**  
*"ê°€ì§œ íë¦„ì´ ì•„ë‹Œ, ì‹¤ì œ íë¦„ìœ¼ë¡œ ì„¤ê³„í•œë‹¤"*  
*Mock ìµœì†Œí™”, ì‹¤ì œ ë°ì´í„° ê¸°ë°˜ í…ŒìŠ¤íŠ¸*

ì´ í…ŒìŠ¤íŠ¸ ì „ëµì„ í†µí•´ Moonwave Travelì˜ í’ˆì§ˆê³¼ ì•ˆì •ì„±ì„ ë³´ì¥í•˜ë©°, ì‹¤ì œ ì‚¬ìš©ì ê²½í—˜ê³¼ ë™ì¼í•œ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
